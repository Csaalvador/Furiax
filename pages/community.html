 <!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FURIAX - Comunidade Inteligente</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/comunidadeaa.css">
    <link rel="stylesheet" href="../css/furiax-sentiment.css">
    <link rel="stylesheet" href="../css/furiax-friend.css">
    <link rel="stylesheet" href="../css/sidebardireito.css">
    <link rel="stylesheet" href="../css/friends.css">
    <link rel="stylesheet" href="../responsividade/comunidade.css">
    <link rel="icon" type="image/png" href="../img/logo/favicon-32x32.png">
   <style>
    body {
        scrollbar-width: 1px;
    }
   </style>
</head>
<body>
    <div class="sidebar">
        <img src="../img/logo/logoFuriax.png" alt="FURIAX Logo">
        <div class="sidebar-header">
            Comunidade <strong>FURIAX</strong><br>
            <small style="color:#888;">Conectando a F√∫ria</small>
        </div>
        
        <a href="./profile.html"><button><i class="fas fa-user-edit"></i> <span>Perfil</span></button></a>
        <a href="./missions.html"><button><i class="fas fa-gamepad"></i> <span>Mini-Games</span></button></a>
        <a href="./community.html"><button class="active"><i class="fas fa-users"></i> <span>Comunidade</span></button></a>
        <a href="./ia.html"><button><i class="fas fa-robot"></i> <span>FuriosoAI</span></button></a>
        <a href="./know-your-fan.html"><button><i class="fas fa-user"></i>Know Your Fan</button></a>
        <a href="./recommendss.html"><button><i class="fas fa-star"></i>Experi√™ncias</button></a>
        
        <div class="user-profile">
            <div class="profile-avatar">
                <img src="../img/logo/logoFuriax.png" alt="Avatar do usu√°rio" class="avatar-image">
            </div>
            
            <div class="user-info">
                <div class="user-name" id="sidebarUsername">FuriaX_Pro</div>
                <div class="user-role" id="sidebarTitle">Furioso Elite</div>
            </div>
            </div>
            
    </div>
    
    <div class="main-content">
        <div class="main-header">
            <h1 class="main-title">
                <i class="fas fa-users title-icon"></i>
                Comunidade FURIAX
            </h1>
        </div>
        
        <div class="community-feed">
            <div class="feed-column">
                <!-- Create Post -->
                <div class="create-post">
                    <textarea class="post-input" placeholder="O que voc√™ est√° pensando sobre a FURIA hoje?" rows="3"></textarea>
                    <div class="post-actions">
                        <div class="post-attachments">
                            <button class="attachment-button"><i class="fas fa-image"></i></button>
                            <button class="attachment-button"><i class="fas fa-video"></i></button>
                            <button class="attachment-button"><i class="fas fa-poll"></i></button>
                            <button class="attachment-button"><i class="fas fa-link"></i></button>
                        </div>
                        <button class="post-button" id="analyzePostBtn">
                            <i class="fas fa-paper-plane"></i> Publicar
                        </button>
                    </div>
                </div>
                
                <!-- Posts Feed -->
                <div class="post-card">
                    <div class="post-header">
                        <div class="post-avatar">MA</div>
                        <div class="post-user-info">
                            <div class="post-user-name">Marcos_Avante</div>
                            <div class="post-time">H√° 5 horas</div>
                        </div>
                    </div>
                    <div class="post-content">
                        Que vit√≥ria INCR√çVEL da FURIA ontem! üî•üî• O time est√° jogando um CS como nunca antes. FalleN est√° absurdo com o AWP! Estou com muita expectativa pro pr√≥ximo major. #FURIAnoMajor #SomosFURIA                    </div>
                    <div class="post-footer">
                        <div class="post-stats">
                            <div class="post-stat"><i class="fas fa-heart"></i> 64</div>
                            <div class="post-stat"><i class="fas fa-comment"></i> 48</div>
                            <div class="post-stat"><i class="fas fa-share"></i> 12</div>
                        </div>
                        <div class="post-actions-btns">
                            <button class="post-action-btn"><i class="far fa-heart"></i> Curtir</button>
                            <button class="post-action-btn comment-btn"><i class="far fa-comment"></i> Comentar</button>
                            <button class="post-action-btn"><i class="fas fa-share"></i> Compartilhar</button>
                        </div>
                    </div>
                
                    <div class="post-footer">
                        <div class="post-stats">
                        </div>
                    
                    </div>
                    <!-- Coment√°rios -->
                    <div class="comments-section" id="comments-1">
                        <div class="comment-form">
                            <input type="text" class="comment-input" placeholder="Escreva um coment√°rio...">
                            <button class="comment-submit">Enviar</button>
                        </div>
                        <div class="comment-list">
                            <div class="comment-item">
                                <div class="comment-avatar">RN</div>
                                <div class="comment-content">
                                    <div class="comment-user">RoninDaFuria</div>
                                    <div class="comment-text">A jogada do Art na Mirage foi insana! 3k com AWP em menos de 5 segundos!</div>
                                    <div class="comment-time">H√° 1 hora</div>
                                </div>
                            </div>
                            <div class="comment-item">
                                <div class="comment-avatar">TB</div>
                                <div class="comment-content">
                                    <div class="comment-user">Tora_Brutal</div>
                                    <div class="comment-text">KSCERATO t√° jogando muito tamb√©m. Aquele clutch 1v3 na Dust2 foi de outro mundo.</div>
                                    <div class="comment-time">H√° 45 minutos</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="post-card">
                    <div class="post-header">
                        <div class="post-avatar">MA</div>
                        <div class="post-user-info">
                            <div class="post-user-name">Marcos_Avante</div>
                            <div class="post-time">H√° 5 horas</div>
                        </div>
                    </div>
                    <div class="post-content">
                        Algu√©m vai estar no encontro de f√£s em S√£o Paulo no pr√≥ximo fim de semana? Estou organizando uma caravana saindo do Rio de Janeiro na sexta-feira! Se algu√©m tiver interesse, comente aqui. Vamos juntos apoiar nosso time! #FURIAMeetup #EncontroFURIA
                    </div>
                    <div class="post-footer">
                        <div class="post-stats">
                            <div class="post-stat"><i class="fas fa-heart"></i> 64</div>
                            <div class="post-stat"><i class="fas fa-comment"></i> 48</div>
                            <div class="post-stat"><i class="fas fa-share"></i> 12</div>
                        </div>
                        
                    </div>
                    <!-- Coment√°rios -->
                    <div class="comments-section" id="comments-2">
                        <div class="comment-form">
                            <input type="text" class="comment-input" placeholder="Escreva um coment√°rio...">
                            <button class="comment-submit">Enviar</button>
                        </div>
                        <div class="comment-list">
                            <div class="comment-item">
                                <div class="comment-avatar">LP</div>
                                <div class="comment-content">
                                    <div class="comment-user">Lobinha_FURIA</div>
                                    <div class="comment-text">Eu vou estar l√°! Podemos nos encontrar no terminal Tiet√™?</div>
                                    <div class="comment-time">H√° 3 horas</div>
                                </div>
                            </div>
                            <div class="comment-item">
                                <div class="comment-avatar">FS</div>
                                <div class="comment-content">
                                    <div class="comment-user">Furioso_SP</div>
                                    <div class="comment-text">Vou estar te esperando, Marcos! Vai ser um encontro √©pico.</div>
                                    <div class="comment-time">H√° 2 horas</div>
                                </div>
                            </div>
                            <div class="comment-item">
                                <div class="comment-avatar">MA</div>
                                <div class="comment-content">
                                    <div class="comment-user">Marcos_Avante</div>
                                    <div class="comment-text">Lobinha, sim! Vamos nos encontrar l√° √†s 10h da manh√£. Vou criar um grupo no WhatsApp para coordenar.</div>
                                    <div class="comment-time">H√° 1 hora</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="post-card">
                    <div class="post-header">
                        <div class="post-avatar">RG</div>
                        <div class="post-user-info">
                            <div class="post-user-name">RafaGamer</div>
                            <div class="post-time">H√° 8 horas</div>
                        </div>
                    </div>
                    <div class="post-content">
                        Algu√©m mais acha que o KSCERATO merece ser considerado um dos TOP 5 jogadores do mundo? As estat√≠sticas dele nesta temporada s√£o simplesmente absurdas! Especialmente aquele clutch 1v3 contra o Navi. O que voc√™s acham? #KSCERATO #FURIAEsports #TopPlayer
                    </div>
                    <div class="post-footer">
                        <div class="post-stats">
                            <div class="post-stat"><i class="fas fa-heart"></i> 215</div>
                            <div class="post-stat"><i class="fas fa-comment"></i> 87</div>
                            <div class="post-stat"><i class="fas fa-share"></i> 24</div>
                        </div>
                        <div class="post-actions-btns">
                            <button class="post-action-btn liked"><i class="fas fa-heart"></i> Curtido</button>
                            <button class="post-action-btn comment-btn"><i class="far fa-comment"></i> Comentar</button>
                            <button class="post-action-btn"><i class="fas fa-share"></i> Compartilhar</button>
                        </div>
                    </div>
                    <!-- Coment√°rios -->
                    <div class="comments-section" id="comments-3">
                        <div class="comment-form">
                            <input type="text" class="comment-input" placeholder="Escreva um coment√°rio...">
                            <button class="comment-submit">Enviar</button>
                        </div>
                        <div class="comment-list">
                            <div class="comment-item">
                                <div class="comment-avatar">CS</div>
                                <div class="comment-content">
                                    <div class="comment-user">CSniper_PRO</div>
                                    <div class="comment-text">Sem d√∫vida! O rating 2.0 dele est√° em 1.34 nos √∫ltimos tr√™s meses. Isso √© TOP 3 material!</div>
                                    <div class="comment-time">H√° 7 horas</div>
                                </div>
                            </div>
                            <div class="comment-item">
                                <div class="comment-avatar">FF</div>
                                <div class="comment-content">
                                    <div class="comment-user">FuriaFanatic</div>
                                    <div class="comment-text">Concordo! E a consci√™ncia t√°tica dele √© inigual√°vel. N√£o √© s√≥ aim, √© o QI de jogo que impressiona.</div>
                                    <div class="comment-time">H√° 6 horas</div>
                                </div>
                            </div>
                            <div class="comment-item">
                                <div class="comment-avatar">VF</div>
                                <div class="comment-content">
                                    <div class="comment-user">Valkiria_FURIA</div>
                                    <div class="comment-text">Ele e Art formam a melhor dupla do CS mundial atual. Mas ele com certeza est√° no TOP 5!</div>
                                    <div class="comment-time">H√° 5 horas</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Polls -->
                <div class="post-card">
                    <div class="post-header">
                        <div class="post-avatar">
                            <img src="/api/placeholder/50/50" alt="FURIA Official">
                        </div>
                        <div class="post-user-info">
                            <div class="post-user-name">FURIA Official</div>
                            <div class="post-time">H√° 12 horas</div>
                        </div>
                    </div>
                    <div class="post-content">
                        Qual mapa voc√™s querem ver a FURIA dominar no pr√≥ximo major? Vote e nos ajude a entender as prefer√™ncias da nossa comunidade! #FURIAlistens
                    </div>
                    <div class="community-polls">
                        <div class="poll-item">
                            <div class="poll-options">
                                <div class="poll-option voted">
                                    <div class="poll-fill" style="width: 42%"></div>
                                    <div class="poll-option-text">
                                        <span>Mirage</span>
                                        <span class="poll-percentage">42%</span>
                                    </div>
                                </div>
                                <div class="poll-option">
                                    <div class="poll-fill" style="width: 28%"></div>
                                    <div class="poll-option-text">
                                        <span>Inferno</span>
                                        <span class="poll-percentage">28%</span>
                                    </div>
                                </div>
                                <div class="poll-option">
                                    <div class="poll-fill" style="width: 15%"></div>
                                    <div class="poll-option-text">
                                        <span>Nuke</span>
                                        <span class="poll-percentage">15%</span>
                                    </div>
                                </div>
                                <div class="poll-option">
                                    <div class="poll-fill" style="width: 15%"></div>
                                    <div class="poll-option-text">
                                        <span>Ancient</span>
                                        <span class="poll-percentage">15%</span>
                                    </div>
                                </div>
                            </div>
                            <div class="poll-meta">
                                <div class="poll-votes">
                                    <i class="fas fa-user"></i> 758 votos
                                </div>
                                <div class="poll-time">
                                    <i class="fas fa-clock"></i> Fechamento em 2 dias
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="post-footer">
                        <div class="post-stats">
                            <div class="post-stat"><i class="fas fa-heart"></i> 287</div>
                            <div class="post-stat"><i class="fas fa-comment"></i> 36</div>
                            <div class="post-stat"><i class="fas fa-share"></i> 42</div>
                        </div>
                        <div class="post-actions-btns">
                            <button class="post-action-btn"><i class="far fa-heart"></i> Curtir</button>
                            <button class="post-action-btn comment-btn"><i class="far fa-comment"></i> Comentar</button>
                            <button class="post-action-btn"><i class="fas fa-share"></i> Compartilhar</button>
                        </div>
                    </div>
                    <!-- Coment√°rios -->
                    <div class="comments-section" id="comments-4">
                        <div class="comment-form">
                            <input type="text" class="comment-input" placeholder="Escreva um coment√°rio...">
                            <button class="comment-submit">Enviar</button>
                        </div>
                        <div class="comment-list">
                            <div class="comment-item">
                                <div class="comment-avatar">CS</div>
                                <div class="comment-content">
                                    <div class="comment-user">CSniper_PRO</div>
                                    <div class="comment-text">Mirage √© a cara da FURIA! Aquele 16-4 contra a Liquid foi absurdo.</div>
                                    <div class="comment-time">H√° 10 horas</div>
                                </div>
                            </div>
                            <div class="comment-item">
                                <div class="comment-avatar">VF</div>
                                <div class="comment-content">
                                    <div class="comment-user">Valkiria_FURIA</div>
                                    <div class="comment-text">Votei em Inferno porque acho que ainda podemos melhorar l√°, mas nosso Mirage √© realmente o melhor!</div>
                                    <div class="comment-time">H√° 8 horas</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="analysis-column">
                <!-- Tabs -->
                <div class="analysis-tabs">
                    <div class="analysis-tab" data-tab="profile">Perfil</div>
                    <div class="analysis-tab" data-tab="fandata">F√£ Data</div>
                    <div class="analysis-tab" data-tab="trending">Trending</div>
                </div>
                
              
                     
                
                      
                
                        
                
                    <!-- JavaScript para gr√°ficos e funcionalidades -->
                   
                <!-- Fan Profile -->
                <div class="analysis-content" id="profile-content">
                    <div class="fan-profile">
                        <!-- Feed de Not√≠cias FURIA Premium -->
<div class="furia-news-hub">
    <div class="news-hub-header">
        <div class="hub-title">
            <i class="fas fa-fire-alt pulse-icon"></i>
            <span>FURIA INSIDER</span>
        </div>
        <div class="hub-controls">
            <button class="hub-refresh-btn" id="refreshNewsBtn">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>
    </div>

    <div class="breaking-news-banner">
        <div class="breaking-news-label">SEMANA</div>
        <div class="breaking-news-content">
            <div class="breaking-news-text">
                FURIA FC garante vaga direta na semifinal da Kings League Brasil ap√≥s vit√≥ria sobre o Fluxo por 5 a 2
            </div>
        </div>
        
    </div>

    

    <div class="news-feed-container">
        <!-- Not√≠cia principal em destaque -->
     

        <!-- Feed de not√≠cias normal -->
        <div class="news-grid">
            <!-- Not√≠cia 1 -->
            <div class="news-card" data-category="events">
                <div class="news-card-img">
                    <img src="../img/news/kingsleague.jpg" alt="Time de Neymar na Kings League">
                    <div class="news-badge events">Esportes</div>
                </div>
                <div class="news-card-content">
                    <div class="news-card-meta">
                        <span class="news-date"><i class="far fa-clock"></i> 5 de maio de 2025</span>
                    </div>
                    <h4 class="news-card-title">FURIA FC garante vaga no Mundial da Kings League</h4>
                    <p class="news-card-excerpt">O FURIA FC, equipe presidida por Neymar Jr., foi o primeiro time classificado para o Mundial de Clubes da Kings League.</p>
                </div>
                <div class="news-card-footer">
                    <span class="news-engagement">
                        <i class="far fa-heart"></i> 412
                        <i class="far fa-comment"></i> 102
                    </span>
                    <a href="https://www.msn.com/pt-br/esportes/futebol/time-de-neymar-%C3%A9-o-primeiro-a-garantir-vaga-no-mundial-de-clubes-da-kings-league/ar-AA1EdU7Q?ocid=BingNewsSerp" class="news-card-link" target="_blank">
                        <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
           
        </div>
    </div>
                     


                        <div class="friends-sidebar">
                            <div class="friends-header">
                                <div class="friends-title">
                                    <i class="fas fa-user-friends"></i> Amigos
                                </div>
                                <div class="friends-actions">
                                    <button class="friend-action-button" title="Mensagens Diretas">
                                        <i class="fas fa-comment-alt"></i>
                                    </button>
                                    <button class="friend-action-button" title="Adicionar Amigo">
                                        <i class="fas fa-user-plus"></i>
                                    </button>
                                </div>
                            </div>
                    
                            <div class="friends-search">
                                <i class="fas fa-search"></i>
                                <input type="text" placeholder="Pesquisar amigos..." id="friendSearchInput">
                            </div>
                    
                            <div class="friends-tabs">
                                <div class="friends-tab active" data-tab="online">Online</div>
                                <div class="friends-tab" data-tab="all">Todos</div>
                                <div class="friends-tab" data-tab="pending">Pendentes</div>
                            </div>
                    
                            <div class="friends-list">
                                <!-- Online Friends Section -->
                                <div class="friends-section active" id="online-section">
                                    <div class="friends-section-header">
                                        <span>Online</span>
                                        <span class="count" id="online-count">0</span>
                                    </div>
                                    <div id="online-friends">
                                        <!-- Friends will be loaded here -->
                                    </div>
                                </div>
                    
                                <!-- All Friends Section -->
                                <div class="friends-section hidden" id="all-section">
                                    <div class="friends-section-header">
                                        <span>Todos os Amigos</span>
                                        <span class="count" id="all-count">0</span>
                                    </div>
                                    <div id="all-friends">
                                        <!-- Friends will be loaded here -->
                                    </div>
                                </div>
                    
                                <!-- Pending Friends Section -->
                                <div class="friends-section hidden" id="pending-section">
                                    <div class="friends-section-header">
                                        <span>Solicita√ß√µes Pendentes</span>
                                        <span class="count" id="pending-count">0</span>
                                    </div>
                                    <div id="pending-friends">
                                        <!-- Pending friends will be loaded here -->
                                    </div>
                                </div>
                            </div>
                    
                            <!-- Current User Profile -->
                            <div class="user-profile">
                                <div class="profile-avatar">
                                    <div class="avatar-image" id="currentUserAvatar">FX</div>
                                    <div class="friend-status status-online"></div>
                                </div>
                                <div class="user-info">
                                    <div class="user-name" id="currentUserName">FuriaX_User</div>
                                    <div class="user-role" id="currentUserRole">Novato</div>
                                </div>
                                <button class="friend-action-button" id="userSettingsBtn">
                                    <i class="fas fa-cog"></i>
                                </button>
                            </div>
                        </div>
                    
                        <div class="social-integration">
                            <div class="social-title">
                                <i class="fas fa-link"></i> Contas Conectadas
                            </div>
                            <div class="social-accounts">
                                <div class="social-account">
                                    
                                    <div class="social-icon twitter-icon">
                                        <i class="fab fa-twitter"></i>
                                    </div>
                                    <div class="social-name">X</div>
                                    <div class="social-status">Conectado</div>
                                </div>
                                
                                <div class="social-account">
                                    <div class="social-icon instagram-icon">
                                        <i class="fab fa-instagram"></i>
                                    </div>
                                    <div class="social-name">Instagram</div>
                                    <div class="social-status">Conectado</div>
                                </div>
                                
                                <div class="social-account">
                                    <div class="social-icon twitch-icon">
                                        <i class="fab fa-twitch"></i>
                                    </div>
                                    <div class="social-name">Twitch</div>
                                    <div class="social-status not-connected">N√£o conectado</div>
                                </div>
                                
                                <div class="social-account">
                                    <div class="social-icon youtube-icon">
                                        <i class="fab fa-youtube"></i>
                                    </div>
                                    <div class="social-name">YouTube</div>
                                    <div class="social-status not-connected">N√£o conectado</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Fan Engagement Score -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching functionality
            const tabs = document.querySelectorAll('.friends-tab');
            const sections = document.querySelectorAll('.friends-section');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Hide all sections
                    sections.forEach(section => section.classList.add('hidden'));
                    
                    // Show the corresponding section
                    const tabName = this.getAttribute('data-tab');
                    document.getElementById(tabName + '-section').classList.remove('hidden');
                });
            });

            // Search functionality
            const searchInput = document.getElementById('friendSearchInput');
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const friendItems = document.querySelectorAll('.friend-item');
                
                friendItems.forEach(item => {
                    const friendName = item.querySelector('.friend-name').textContent.toLowerCase();
                    if (friendName.includes(searchTerm)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });

            // Load friends from localStorage
            loadFriends();

            // Load current user profile
            loadCurrentUserProfile();

            // Settings button click event
            document.getElementById('userSettingsBtn').addEventListener('click', function() {
                // Open settings modal or navigate to settings page
                alert('Configura√ß√µes do usu√°rio');
            });
        });

        // Function to load friends from localStorage
        function loadFriends() {
            try {
                // First try to get profiles from MultiProfileManager if available
                let profiles = {};
                if (window.FURIAXCommunity && window.FURIAXCommunity.MultiProfileManager) {
                    profiles = window.FURIAXCommunity.MultiProfileManager.getAllProfiles();
                } else {
                    // Fallback to getting profiles from localStorage
                    const storedProfiles = localStorage.getItem('furiax_all_profiles');
                    if (storedProfiles) {
                        profiles = JSON.parse(storedProfiles);
                    }
                }

                // Get current user ID
                let currentUserId = null;
                if (window.FURIAXCommunity && window.FURIAXCommunity.MultiProfileManager) {
                    currentUserId = window.FURIAXCommunity.MultiProfileManager.getActiveProfileId();
                } else {
                    currentUserId = localStorage.getItem('furiax_active_profile');
                }

                // Process profiles
                const onlineFriends = document.getElementById('online-friends');
                const allFriends = document.getElementById('all-friends');
                
                // Clear previous content
                onlineFriends.innerHTML = '';
                allFriends.innerHTML = '';
                
                let onlineCount = 0;
                let totalCount = 0;

                // Create friend items
                Object.entries(profiles).forEach(([id, profile]) => {
                    // Skip current user
                    if (id === currentUserId) return;
                    
                    totalCount++;
                    
                    // Determine online status randomly for demo
                    const onlineStatus = Math.random() > 0.5;
                    if (onlineStatus) onlineCount++;
                    
                    const statusClass = onlineStatus ? 'status-online' : 'status-offline';
                    const activityText = onlineStatus ? getRandomActivity() : 'Offline';
                    
                    const friendItem = createFriendItem(profile, id, statusClass, activityText);
                    
                    // Add to all friends section
                    allFriends.appendChild(friendItem.cloneNode(true));
                    
                    // Add to online friends if online
                    if (onlineStatus) {
                        onlineFriends.appendChild(friendItem);
                    }
                });
                
                // Update counters
                document.getElementById('online-count').textContent = onlineCount;
                document.getElementById('all-count').textContent = totalCount;
                
                // Show no friends message if needed
                if (totalCount === 0) {
                    const noFriendsMsg = document.createElement('div');
                    noFriendsMsg.className = 'no-friends-msg';
                    noFriendsMsg.innerHTML = '<i class="fas fa-user-friends"></i><br>Nenhum amigo encontrado.<br>Adicione novos amigos para come√ßar!';
                    
                    allFriends.appendChild(noFriendsMsg);
                    onlineFriends.appendChild(noFriendsMsg.cloneNode(true));
                }
                
                // Add some pending requests for demo
                const pendingFriends = document.getElementById('pending-friends');
                pendingFriends.innerHTML = '';
                
                // Create sample pending requests
                const pendingCount = Math.floor(Math.random() * 3);
                document.getElementById('pending-count').textContent = pendingCount;
                
                if (pendingCount > 0) {
                    for (let i = 0; i < pendingCount; i++) {
                        const pendingProfile = {
                            username: 'FURIA_Fan_' + (Math.floor(Math.random() * 100) + 1),
                            avatar: null
                        };
                        
                        const pendingItem = createPendingItem(pendingProfile, 'pending_' + i);
                        pendingFriends.appendChild(pendingItem);
                    }
                } else {
                    const noPendingMsg = document.createElement('div');
                    noPendingMsg.className = 'no-friends-msg';
                    noPendingMsg.innerHTML = 'Nenhuma solicita√ß√£o pendente.';
                    pendingFriends.appendChild(noPendingMsg);
                }
                
            } catch (error) {
                console.error('Error loading friends:', error);
                
                // Show error message
                const errorMsg = document.createElement('div');
                errorMsg.className = 'no-friends-msg';
                errorMsg.innerHTML = '<i class="fas fa-exclamation-circle"></i><br>Erro ao carregar amigos.';
                
                document.getElementById('online-friends').innerHTML = '';
                document.getElementById('all-friends').innerHTML = '';
                document.getElementById('online-friends').appendChild(errorMsg);
                document.getElementById('all-friends').appendChild(errorMsg.cloneNode(true));
            }
        }

        // Create a friend item element
        function createFriendItem(profile, id, statusClass, activityText) {
            const item = document.createElement('div');
            item.className = 'friend-item';
            item.setAttribute('data-id', id);
            
            const initials = profile.username ? profile.username.substring(0, 2).toUpperCase() : 'FX';
            
            let avatarContent = '';
            if (profile.avatar) {
                avatarContent = `<img src="${profile.avatar}" alt="${profile.username}" onerror="this.style.display='none';this.parentNode.textContent='${initials}'">`;
            } else {
                avatarContent = initials;
            }
            
            item.innerHTML = `
                <div class="friend-avatar">
                    ${avatarContent}
                    <div class="friend-status ${statusClass}"></div>
                </div>
                <div class="friend-info">
                    <div class="friend-name">${profile.username || 'Usu√°rio FURIAX'}</div>
                    <div class="friend-activity">${activityText}</div>
                </div>
                <div class="friend-actions">
                    <button class="friend-action msg" title="Mensagem">
                        <i class="fas fa-comment"></i>
                    </button>
                    <button class="friend-action call" title="Chamar">
                        <i class="fas fa-phone"></i>
                    </button>
                </div>
            `;
            
            return item;
        }

        // Create a pending friend request item
        function createPendingItem(profile, id) {
            const item = document.createElement('div');
            item.className = 'friend-item';
            item.setAttribute('data-id', id);
            
            const initials = profile.username ? profile.username.substring(0, 2).toUpperCase() : 'FX';
            
            let avatarContent = '';
            if (profile.avatar) {
                avatarContent = `<img src="${profile.avatar}" alt="${profile.username}" onerror="this.style.display='none';this.parentNode.textContent='${initials}'">`;
            } else {
                avatarContent = initials;
            }
            
            item.innerHTML = `
                <div class="friend-avatar">
                    ${avatarContent}
                </div>
                <div class="friend-info">
                    <div class="friend-name">${profile.username || 'Usu√°rio FURIAX'}</div>
                    <div class="friend-activity">Enviou solicita√ß√£o de amizade</div>
                </div>
                <div class="friend-actions">
                    <button class="friend-action call" title="Aceitar" style="color: #3ba55c;">
                        <i class="fas fa-check"></i>
                    </button>
                    <button class="friend-action" title="Rejeitar" style="color: #ed4245;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            return item;
        }

        // Load current user profile
        function loadCurrentUserProfile() {
            try {
                // Get profile data
                let profileData = null;
                
                if (window.FURIAXCommunity && window.FURIAXCommunity.ProfileManager) {
                    profileData = window.FURIAXCommunity.ProfileManager.getProfileData();
                } else {
                    // Fallback to localStorage
                    const storedProfile = localStorage.getItem('furiaxProfile');
                    if (storedProfile) {
                        profileData = JSON.parse(storedProfile);
                    }
                }
                
                if (!profileData) {
                    console.warn('Profile data not found');
                    return;
                }
                
                // Update UI elements
                const usernameElement = document.getElementById('currentUserName');
                const roleElement = document.getElementById('currentUserRole');
                const avatarElement = document.getElementById('currentUserAvatar');
                
                if (usernameElement) {
                    usernameElement.textContent = profileData.username || 'FuriaX_User';
                }
                
                if (roleElement) {
                    // Map title value to more friendly text
                    const titles = {
                        "novato": "Novato",
                        "iniciante": "Iniciante",
                        "casual": "Jogador Casual",
                        "competitivo": "Competidor", 
                        "furioso": "Furioso",
                        "furioso_elite": "Furioso Elite",
                        "lendario": "Furioso Lend√°rio"
                    };
                    
                    roleElement.textContent = titles[profileData.title] || profileData.title || 'Novato';
                }
                
                if (avatarElement) {
                    if (profileData.avatar) {
                        if (avatarElement.tagName === 'IMG') {
                            avatarElement.src = profileData.avatar;
                        } else {
                            const img = document.createElement('img');
                            img.src = profileData.avatar;
                            img.alt = profileData.username;
                            img.className = 'avatar-image';
                            img.onerror = function() {
                                this.style.display = 'none';
                                avatarElement.textContent = profileData.username.substring(0, 2).toUpperCase();
                            };
                            
                            avatarElement.textContent = '';
                            avatarElement.appendChild(img);
                        }
                    } else {
                        // Use initials if no avatar
                        avatarElement.textContent = profileData.username.substring(0, 2).toUpperCase();
                    }
                }
                
            } catch (error) {
                console.error('Error loading current user profile:', error);
            }
        }

        // Get random activity text for demo purposes
        function getRandomActivity() {
            const activities = [
                'Jogando VALORANT',
                'Assistindo FURIA Esports',
                'Jogando CS:GO',
                'Online h√° 2 horas',
                'Na comunidade FURIAX',
                'Dispon√≠vel',
                'Participando de eventos',
                'Jogando League of Legends'
            ];
            
            return activities[Math.floor(Math.random() * activities.length)];
        }
    </script>
</body>
</html>
                    </div>
                </div>
                
                <!-- Fan Data Analysis -->
                <div class="analysis-content" id="fandata-content">
                    <div class="fan-insights">
                        <div class="fan-profile-header">
                            <i class="fas fa-brain"></i> Insights Personalizados
                        </div>
                        
                        <div class="insight-item">
                            <div class="insight-header">
                                <i class="fas fa-lightbulb"></i> Padr√£o de Comportamento
                            </div>
                            <div class="insight-content">
                                Voc√™ demonstra maior atividade ap√≥s vit√≥rias da FURIA em competi√ß√µes importantes, com picos de engajamento nas 24h seguintes aos jogos.
                            </div>
                            <div class="insight-prediction">
                                <div class="prediction-icon"><i class="fas fa-chart-line"></i></div>
                                <div class="prediction-text">Sugest√£o: Ative notifica√ß√µes para eventos ao vivo para aumentar seu engajamento.</div>
                            </div>
                        </div>
                        
                        <div class="insight-item">
                            <div class="insight-header">
                                <i class="fas fa-users"></i> Comunidade
                            </div>
                            <div class="insight-content">
                                Seus interesses se alinham com 78% dos f√£s mais ativos da FURIA. Sua intera√ß√£o com conte√∫do sobre CS:GO est√° entre os 15% mais altos da plataforma.
                            </div>
                            <div class="insight-prediction">
                                <div class="prediction-icon"><i class="fas fa-user-friends"></i></div>
                                <div class="prediction-text">Sugest√£o: Conecte-se com @RoninDaFuria e @CSniper_PRO que compartilham seus interesses.</div>
                            </div>
                        </div>
                        
                        <div class="insight-item">
                            <div class="insight-header">
                                <i class="fas fa-shopping-cart"></i> Consumo
                            </div>
                            <div class="insight-content">
                                Seu hist√≥rico de compras mostra prefer√™ncia por camisetas e itens de edi√ß√£o limitada. Voc√™ costuma adquirir produtos nas primeiras 48h ap√≥s lan√ßamentos.
                            </div>
                            <div class="insight-prediction">
                                <div class="prediction-icon"><i class="fas fa-tag"></i></div>
                                <div class="prediction-text">Recomenda√ß√£o: A nova cole√ß√£o "FURIA Major Edition" ser√° lan√ßada na pr√≥xima semana.</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Social Feed Integration -->
                    <div class="social-feed">
                        <div class="social-feed-title">
                            <i class="fas fa-stream"></i> Suas Intera√ß√µes Sociais
                        </div>
                        
                        <div class="external-post">
                            <div class="external-post-header">
                                <div class="external-source twitter-source">
                                    <i class="fab fa-twitter"></i>
                                </div>
                                <div class="external-user">Voc√™ retweetou @FURIA</div>
                            </div>
                            <div class="external-content">
                                "VAMOS! Classificados para a pr√≥xima fase do Major! GGWP @TeamLiquid #DIADEFURIA"
                            </div>
                            <div class="external-stats">
                                <div><i class="fas fa-heart"></i> 1.2K</div>
                                <div><i class="fas fa-retweet"></i> 342</div>
                                <div><i class="fas fa-reply"></i> 76</div>
                            </div>
                        </div>
                        
                        <div class="external-post">
                            <div class="external-post-header">
                                <div class="external-source instagram-source">
                                    <i class="fab fa-instagram"></i>
                                </div>
                                <div class="external-user">Voc√™ curtiu post de @artcs</div>
                            </div>
                            <div class="external-content">
                                "Preparando para o Major. Foco total! üî• #FURIA #CSMAJOR"
                            </div>
                            <div class="external-stats">
                                <div><i class="fas fa-heart"></i> 45.7K</div>
                                <div><i class="fas fa-comment"></i> 892</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Fan Analytics -->
                    <div class="user-analytics">
                        <div class="analytics-title">
                            <i class="fas fa-chart-pie"></i> An√°lise de Prefer√™ncias
                        </div>
                        
                        <div class="analytics-charts">
                            <div class="analytics-chart">
                                <div class="chart-title">
                                    <i class="fas fa-gamepad"></i> Distribui√ß√£o de Interesses em Jogos
                                </div>
                                <div class="donut-chart"></div>
                                <div class="chart-legend">
                                    <div class="legend-item">
                                        <div class="legend-color blue"></div>
                                        <div class="legend-text">CS:GO</div>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color purple"></div>
                                        <div class="legend-text">Valorant</div>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color orange"></div>
                                        <div class="legend-text">LoL</div>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color red"></div>
                                        <div class="legend-text">Outros</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Trending Topics -->
                <div class="analysis-content" id="trending-content">
                    <div class="trending-topics">
                        <div class="fan-profile-header">
                            <i class="fas fa-fire"></i> Trending Topics
                        </div>
                        
                        <div class="topic-list">
                            <div class="topic-item">
                                <div class="topic-rank">1</div>
                                <div class="topic-content">
                                    <div class="topic-title">FURIA no Major</div>
                                    <div class="topic-meta">
                                        <div>482 men√ß√µes</div>
                                        <div class="topic-trend trend-up">
                                            <i class="fas fa-arrow-up"></i> 22%
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="topic-item">
                                <div class="topic-rank">2</div>
                                <div class="topic-content">
                                    <div class="topic-title">Art AWPer</div>
                                    <div class="topic-meta">
                                        <div>376 men√ß√µes</div>
                                        <div class="topic-trend trend-up">
                                            <i class="fas fa-arrow-up"></i> 45%
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="topic-item">
                                <div class="topic-rank">3</div>
                                <div class="topic-content">
                                    <div class="topic-title">Encontro de f√£s SP</div>
                                    <div class="topic-meta">
                                        <div>289 men√ß√µes</div>
                                        <div class="topic-trend trend-up">
                                            <i class="fas fa-arrow-up"></i> 12%
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="topic-item">
                                <div class="topic-rank">4</div>
                                <div class="topic-content">
                                    <div class="topic-title">KSCERATO Top 5</div>
                                    <div class="topic-meta">
                                        <div>215 men√ß√µes</div>
                                        <div class="topic-trend trend-up">
                                            <i class="fas fa-arrow-up"></i> 32%
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="topic-item">
                                <div class="topic-rank">5</div>
                                <div class="topic-content">
                                    <div class="topic-title">Nova camisa FURIA</div>
                                    <div class="topic-meta">
                                        <div>187 men√ß√µes</div>
                                        <div class="topic-trend trend-down">
                                            <i class="fas fa-arrow-down"></i> 8%
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Loyalty Program -->
                    <div class="loyalty-program">
                        <div class="fan-profile-header">
                            <i class="fas fa-award"></i> Programa de Lealdade
                        </div>
                        
                       
                </div>
            </div>
        </div>
    </div>

    

    <script src="../js/furiax-fixfeed.js"></script>
    <!-- <script src="../js/integration/recommends.js"></script> -->
    <script src="../js/furiax-login-auth.js"></script>
<script src="../js/furiax-sentiment-analysis.js"></script>
<script src="../js/furia-deletar.js"></script>
<script src="../js/engajament.js"></script>
<script src="../js/furiax-gamification.js"></script>
<script src="../js/furiax-profile-system.js"></script>
<script src="../js/furiax-main-integration.js"></script>
<script src="../js/furiax-community.js"></script>
<script src="../js/integration/furiax-profile.js"></script>
<script src="../js/integration/furiax-sync.js"></script>
<script src="../js/integration/furiax-user_session.js"></script>
<script src="../js/furiax-main-integration.js"></script>
<script src="../js/furiax-post-fix.js"></script>
<script src="../js/integration/furiax-core.js"></script>
<script src="../responsividade/comunidade.js"></script>
<script src="../js/like.js"></script>
<script src="../js/furiax-friends.js"></script>
<script src="../js/furiax-fixphotos.js"></script>
<script src="../js/discord.js"></script>
<script src="../js/reload.js"></script>
<script src="../js/furiax-compartilhar.js"></script>
<script src="../js/friends.js"></script>
<!-- <script src="../js/furiax-feed-manager.js"></script> -->

<script>
    /* Add JavaScript to Toggle Mobile Menu */
//**/**


(function() {
  // Auto-iniciar ap√≥s o DOM estar carregado
  document.addEventListener('DOMContentLoaded', initPostButtonsFix);
  
  // Ou iniciar imediatamente se o DOM j√° estiver pronto
  if (document.readyState === 'interactive' || document.readyState === 'complete') {
    initPostButtonsFix();
  }
  
  // Fun√ß√£o principal de inicializa√ß√£o
  function initPostButtonsFix() {
    console.log('üîß FURIAX Post Buttons Fix: Inicializando...');
    
    // Observar o sistema FURIAX para interceptar a cria√ß√£o de posts
    interceptPostCreation();
    
    // Configurar observador para corre√ß√µes cont√≠nuas
    setupDOMObserver();
    
    // Corrigir posts existentes que possam estar sem bot√µes
    fixExistingPosts();
    
    // Verificar novamente ap√≥s um tempo para garantir
   
  }
  
  // Intercepta a cria√ß√£o de posts do sistema principal
  function interceptPostCreation() {
    // Aguardar at√© que o sistema FURIAX esteja dispon√≠vel
    const checkSystem = setInterval(() => {
      if (window.FURIAXCommunity && window.FURIAXCommunity.PostManager) {
        clearInterval(checkSystem);
        
        // Interceptar a fun√ß√£o de cria√ß√£o de post
        const originalCreatePost = window.FURIAXCommunity.PostManager.createPost;
        window.FURIAXCommunity.PostManager.createPost = function(content) {
          // Chamar a fun√ß√£o original
          const post = originalCreatePost.call(this, content);
          
          // Garantir que os bot√µes foram adicionados corretamente
          setTimeout(() => {
            // Encontrar o post rec√©m-criado no DOM
            const postElements = document.querySelectorAll('.post-card');
            if (postElements.length > 0) {
              // O post mais recente geralmente √© o primeiro
              const newPostElement = postElements[0];
              
              // Verificar se o post possui os bot√µes de a√ß√£o
              if (!hasActionButtons(newPostElement)) {
                console.log('üõ†Ô∏è Adicionando bot√µes ausentes ao novo post...');
                addActionButtonsToPost(newPostElement, post);
              }
            }
          }, 100);
          
          return post;
        };
        
        console.log('‚úÖ Intercepta√ß√£o de cria√ß√£o de posts configurada');
      }
    }, 200);
    
    // Se passar muito tempo, cancelar a verifica√ß√£o
    setTimeout(() => clearInterval(checkSystem), 10000);
  }
  
  // Verificar se o post possui os bot√µes de a√ß√£o
  function hasActionButtons(postElement) {
    const actionsContainer = postElement.querySelector('.post-actions-btns');
    if (!actionsContainer) return false;
    
    const buttons = actionsContainer.querySelectorAll('.post-action-btn');
    return buttons.length >= 3; // Deve ter pelo menos os 3 bot√µes principais
  }
  
  // Adicionar bot√µes de a√ß√£o a um post
  function addActionButtonsToPost(postElement, postData = null) {
    // Se n√£o tivermos os dados do post, tentar extrair ID
    const postId = postData?.id || postElement.dataset.id || `post-${Date.now()}`;
    
    // Se o elemento n√£o tem ID, adicionar
    if (!postElement.dataset.id) {
      postElement.dataset.id = postId;
    }
    
    // Verificar se j√° existe um container de a√ß√µes
    let actionsContainer = postElement.querySelector('.post-actions-btns');
    
    // Se n√£o existir, verificar se existe o footer para adicionar
    if (!actionsContainer) {
      const postFooter = postElement.querySelector('.post-footer');
      
      if (postFooter) {
        // Verificar se o footer j√° tem um elemento para estat√≠sticas
        let statsContainer = postFooter.querySelector('.post-stats');
        
        // Se n√£o tiver stats, criar
        if (!statsContainer) {
          statsContainer = document.createElement('div');
          statsContainer.className = 'post-stats';
          statsContainer.innerHTML = `
            <div class="post-stat"><i class="fas fa-heart"></i> 0</div>
            <div class="post-stat"><i class="fas fa-comment"></i> 0</div>
            <div class="post-stat"><i class="fas fa-share"></i> 0</div>
          `;
          postFooter.appendChild(statsContainer);
        }
        
        // Criar container de a√ß√µes
        actionsContainer = document.createElement('div');
        actionsContainer.className = 'post-actions-btns';
        postFooter.appendChild(actionsContainer);
      } else {
        // Se n√£o tiver footer, criar tudo
        const postFooter = document.createElement('div');
        postFooter.className = 'post-footer';
        
        // Adicionar estat√≠sticas
        const statsContainer = document.createElement('div');
        statsContainer.className = 'post-stats';
        statsContainer.innerHTML = `
          <div class="post-stat"><i class="fas fa-heart"></i> 0</div>
          <div class="post-stat"><i class="fas fa-comment"></i> 0</div>
          <div class="post-stat"><i class="fas fa-share"></i> 0</div>
        `;
        postFooter.appendChild(statsContainer);
        
        // Adicionar container de a√ß√µes
        actionsContainer = document.createElement('div');
        actionsContainer.className = 'post-actions-btns';
        postFooter.appendChild(actionsContainer);
        
        // Adicionar footer ao post
        postElement.appendChild(postFooter);
      }
    }
    
    // Se chegamos aqui e ainda n√£o temos o container, algo est√° muito errado
    if (!actionsContainer) {
      console.error('‚ùå N√£o foi poss√≠vel encontrar ou criar container de a√ß√µes');
      return false;
    }
    
    // Limpar container existente
    actionsContainer.innerHTML = '';
    
    // Adicionar os tr√™s bot√µes
    actionsContainer.innerHTML = `
      <button class="post-action-btn" data-action="curtir" data-id="${postId}">
        <i class="far fa-heart"></i> Curtir
      </button>
      <button class="post-action-btn comment-btn" data-action="comentar" data-id="${postId}">
        <i class="far fa-comment"></i> Comentar
      </button>
      <button class="post-action-btn" data-action="compartilhar" data-id="${postId}">
        <i class="fas fa-share"></i> Compartilhar
      </button>
    `;
    
    // Verificar se temos se√ß√£o de coment√°rios
    if (!postElement.querySelector('.comments-section')) {
      const commentsSection = document.createElement('div');
      commentsSection.className = 'comments-section';
      commentsSection.id = `comments-${postId}`;
      commentsSection.innerHTML = `
        <div class="comment-form">
          <input type="text" class="comment-input" placeholder="Escreva um coment√°rio...">
          <button class="comment-submit" data-id="${postId}">Enviar</button>
        </div>
        <div class="comment-list"></div>
      `;
      postElement.appendChild(commentsSection);
    }
    
    // Restaurar processador de bot√µes se dispon√≠vel
    if (window.FURIAXCommunity?.ButtonStabilizer?.manuallyStabilize) {
      setTimeout(() => {
        window.FURIAXCommunity.ButtonStabilizer.manuallyStabilize();
      }, 200);
    }
    
    return true;
  }
  
  // Corrigir posts existentes que possam estar sem bot√µes
  function fixExistingPosts() {
    const posts = document.querySelectorAll('.post-card');
    let fixedCount = 0;
    
    posts.forEach(post => {
      if (!hasActionButtons(post)) {
        console.log(`üîß Corrigindo post ID: ${post.dataset.id || 'sem ID'}`);
        addActionButtonsToPost(post);
        fixedCount++;
      }
    });
    
    if (fixedCount > 0) {
      console.log(`‚úÖ ${fixedCount} posts corrigidos com sucesso`);
    }
  }
  
  // Configurar observador para corre√ß√µes cont√≠nuas
  function setupDOMObserver() {
    const observer = new MutationObserver(mutations => {
      let shouldCheckPosts = false;
      
      for (const mutation of mutations) {
        if (mutation.addedNodes.length) {
          for (const node of mutation.addedNodes) {
            // Se for um elemento DOM
            if (node.nodeType === 1) {
              // Se for um post, ou contiver posts
              if (node.classList?.contains('post-card') || 
                  node.querySelector?.('.post-card')) {
                shouldCheckPosts = true;
                break;
              }
            }
          }
        }
        
        if (shouldCheckPosts) break;
      }
      
      if (shouldCheckPosts) {
        // Pequeno delay para garantir que o DOM foi completamente atualizado
        setTimeout(fixExistingPosts, 100);
      }
    });
    
    // Observar o feed de posts
    const feedContainer = document.querySelector('.feed-column');
    if (feedContainer) {
      observer.observe(feedContainer, {
        childList: true,
        subtree: true
      });
      console.log('üëÄ Observador configurado para corrigir novos posts');
    }
  }
  
  // Adicionar CSS necess√°rio
  function addRequiredCSS() {
    const style = document.createElement('style');
    style.textContent = `
      /* Garante que os bot√µes sejam vis√≠veis */
      .post-actions-btns {
        display: flex;
        justify-content: space-between;
        margin-top: 10px;
      }
      
      .post-action-btn {
        background: transparent;
        color: #ccc;
        border: none;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      
      .post-action-btn:hover {
        background: rgba(255, 255, 255, 0.1);
      }
      
      .post-action-btn i {
        font-size: 14px;
      }
      
      .post-action-btn.liked {
        color: #ff3b5c;
      }
      
      /* Estilos para se√ß√£o de coment√°rios */
      .comments-section {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
      }
      
      .comments-section.show, .comments-section.visible {
        max-height: 500px !important;
        overflow-y: auto;
        padding-top: 10px;
        margin-top: 10px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }
      
      .comment-form {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
      }
      
      .comment-input {
        flex: 1;
        padding: 8px;
        border-radius: 5px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(0, 0, 0, 0.1);
        color: white;
      }
      
      .comment-submit {
        cursor: pointer;
        background: linear-gradient(90deg, #1e90ff, #0066cc);
        color: white;
        border: none;
        border-radius: 5px;
        padding: 5px 15px;
      }
    `;
    document.head.appendChild(style);
  }
  
  // Iniciar com os estilos necess√°rios
  addRequiredCSS();
})();

    // 2. Fun√ß√£o para obter perfil do usu√°rio
    function getProfile() {
        try {
            const profileData = localStorage.getItem(CONFIG.STORAGE_KEY_PROFILE);
            if (profileData) {
                return JSON.parse(profileData);
            }
        } catch (e) {
            console.error('Erro ao obter perfil:', e);
        }
        return null;
    }
    
    /**
 * FURIAX - Corre√ß√£o do sistema de curtidas
 * Este script corrige o problema de curtir/descurtir posts no feed de comunidade
 */
document.addEventListener('DOMContentLoaded', function() {
    console.log('üß° Iniciando corre√ß√£o do sistema de curtidas...');
    
    // Fun√ß√£o para corrigir o comportamento de curtir/descurtir
    function fixLikeSystem() {
        // Selecionar todos os bot√µes de curtir
        const likeButtons = document.querySelectorAll('.post-action-btn:first-child');
        
        // Remover listeners antigos (para evitar duplica√ß√£o)
        likeButtons.forEach(button => {
            const newButton = button.cloneNode(true);
            if (button.parentNode) {
                button.parentNode.replaceChild(newButton, button);
            }
            
            // Adicionar novo event listener com comportamento correto
            newButton.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Encontrar o post associado a este bot√£o
                const postCard = this.closest('.post-card');
                if (!postCard) return;
                
                // Verificar estado atual (curtido ou n√£o)
                const isLiked = this.classList.contains('liked');
                
                // Encontrar contador de curtidas
                const likeCounter = postCard.querySelector('.post-stat:first-child');
                let likeCount = 0;
                
                if (likeCounter) {
                    // Extrair n√∫mero atual de curtidas
                    const currentText = likeCounter.textContent;
                    const match = currentText.match(/\d+/);
                    if (match) {
                        likeCount = parseInt(match[0]);
                    }
                }
                
                if (isLiked) {
                    // Descurtir
                    this.classList.remove('liked');
                    this.innerHTML = '<i class="far fa-heart"></i> Curtir';
                    
                    // Decrementar contador se maior que zero
                    if (likeCount > 0) {
                        likeCount--;
                        if (likeCounter) {
                            likeCounter.innerHTML = `<i class="fas fa-heart"></i> ${likeCount}`;
                        }
                    }
                    
                    console.log('Post descurtido com sucesso');
                } else {
                    // Curtir
                    this.classList.add('liked');
                    this.innerHTML = '<i class="fas fa-heart"></i> Curtido';
                    
                    // Incrementar contador
                    likeCount++;
                    if (likeCounter) {
                        likeCounter.innerHTML = `<i class="fas fa-heart"></i> ${likeCount}`;
                    }
                    
                    console.log('Post curtido com sucesso');
                }
                
                // Armazenar estado no localStorage (opcional)
                try {
                    const postId = postCard.dataset.id;
                    if (postId) {
                        const likedPosts = JSON.parse(localStorage.getItem('furiax_liked_posts') || '{}');
                        
                        if (!isLiked) {
                            // Adicionar √†s curtidas
                            likedPosts[postId] = true;
                        } else {
                            // Remover das curtidas
                            delete likedPosts[postId];
                        }
                        
                        localStorage.setItem('furiax_liked_posts', JSON.stringify(likedPosts));
                    }
                } catch (error) {
                    console.error('Erro ao salvar estado de curtida:', error);
                }
            });
        });
        
        console.log(`‚úÖ Sistema de curtidas corrigido para ${likeButtons.length} bot√µes`);
    }
    
    // Aplicar corre√ß√£o inicial
    fixLikeSystem();
    
    // Observar mudan√ßas no DOM para aplicar corre√ß√£o a novos posts
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length) {
                // Verificar se algum novo post foi adicionado
                for (let node of mutation.addedNodes) {
                    if (node.nodeType === 1 && 
                        (node.classList.contains('post-card') || 
                         node.querySelector('.post-card'))) {
                        // Novo post detectado, aplicar corre√ß√£o
                        setTimeout(fixLikeSystem, 100);
                        break;
                    }
                }
            }
        });
    });
    
    // Configurar observador para mudan√ßas no feed
    const feedColumn = document.querySelector('.feed-column');
    if (feedColumn) {
        observer.observe(feedColumn, { childList: true, subtree: true });
        console.log('üëÄ Observador configurado para novos posts');
    }
    
    // Restaurar estado das curtidas do localStorage
    try {
        const likedPosts = JSON.parse(localStorage.getItem('furiax_liked_posts') || '{}');
        
        // Para cada post que j√° foi curtido, definir estado visual
        Object.keys(likedPosts).forEach(postId => {
            const post = document.querySelector(`.post-card[data-id="${postId}"]`);
            if (post) {
                const likeButton = post.querySelector('.post-action-btn:first-child');
                if (likeButton) {
                    likeButton.classList.add('liked');
                    likeButton.innerHTML = '<i class="fas fa-heart"></i> Curtido';
                }
            }
        });
    } catch (error) {
        console.error('Erro ao restaurar estado das curtidas:', error);
    }
});
    // 3. Fun√ß√£o para garantir que as imagens sejam exibidas corretamente
    function fixAvatarImages() {
        debug("Aplicando corre√ß√£o para backgrounds azuis...");
        
        const profile = getProfile();
        if (!profile || !profile.avatar) {
            debug("Perfil n√£o encontrado ou sem avatar definido");
            return;
        }
        
        // Determinar URL do avatar
        let avatarUrl;
        const avatarId = parseInt(profile.avatar);
        
        if (!isNaN(avatarId) && avatarMappings[avatarId]) {
            avatarUrl = avatarMappings[avatarId];
            debug(`Avatar ID ${avatarId} mapeado para: ${avatarUrl}`);
        } else if (typeof profile.avatar === 'string' && 
                  (profile.avatar.startsWith('http') || 
                   profile.avatar.startsWith('../') || 
                   profile.avatar.startsWith('/'))) {
            // √â uma URL completa
            avatarUrl = profile.avatar;
            debug(`Avatar √© uma URL: ${avatarUrl}`);
        } else {
            // Fallback para logo padr√£o
            avatarUrl = CONFIG.DEFAULT_AVATAR;
            debug(`Usando avatar padr√£o: ${avatarUrl}`);
        }
        
        // Fun√ß√£o para corrigir container de avatar
        function fixContainer(container, username) {
            // Verificar se √© um container do usu√°rio atual
            const parent = container.closest('.post-card, .comment-item');
            if (!parent) return;
            
            const userElement = parent.querySelector('.post-user-name, .comment-user');
            if (!userElement || userElement.textContent !== profile.username) return;
            
            debug(`Corrigindo avatar para ${profile.username} em ${container.className}`);
            
            // Remover background azul
            container.style.background = 'none';
            
            // Garantir que exista uma imagem
            let avatarImg = container.querySelector('img');
            
            if (!avatarImg) {
                // Criar imagem se n√£o existir
                avatarImg = document.createElement('img');
                avatarImg.alt = 'Avatar';
                avatarImg.className = 'avatar-image';
                container.appendChild(avatarImg);
                debug("Imagem de avatar criada");
            }
            
            // Garantir estilos corretos na imagem
            avatarImg.style.width = '100%';
            avatarImg.style.height = '100%';
            avatarImg.style.objectFit = 'cover';
            avatarImg.style.borderRadius = '50%';
            
            // Definir src da imagem
            avatarImg.src = avatarUrl;
            
            // Adicionar fallback
            avatarImg.onerror = function() {
                debug(`Erro ao carregar imagem: ${avatarUrl}, usando fallback`);
                this.src = CONFIG.DEFAULT_AVATAR;
                // Adicionar borda para visualiza√ß√£o
                this.style.border = '2px solid red';
            };
            
            debug(`Avatar atualizado para: ${avatarUrl}`);
        }
        
        // Aplicar corre√ß√£o a todos os containers de avatar
        document.querySelectorAll('.post-avatar, .comment-avatar').forEach(container => {
            fixContainer(container);
        });
    }
    
    // 4. Corrigir estilos CSS problem√°ticos
    function fixCSSStyles() {
        debug("Corrigindo estilos CSS problem√°ticos...");
        
        // Adicionar estilos que garantem que a imagem seja exibida corretamente
        const styleEl = document.createElement('style');
        styleEl.id = 'avatar-background-fix-styles';
        styleEl.textContent = `
            /* Garantir que o container n√£o tenha background que sobreponha a imagem */
            .post-avatar, .comment-avatar {
                background: transparent !important;
                overflow: hidden !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                width: 40px !important;
                height: 40px !important;
                border-radius: 50% !important;
            }
            
            /* Garantir que a imagem ocupe todo o espa√ßo dispon√≠vel */
            .post-avatar img, .comment-avatar img {
                width: 100% !important;
                height: 100% !important;
                object-fit: cover !important;
                border-radius: 50% !important;
                display: block !important;
            }
            
            /* Adicionar efeito de hover para melhor feedback visual */
            .post-avatar:hover img, .comment-avatar:hover img {
                transform: scale(1.05);
                transition: transform 0.2s ease;
            }
        `;
        
        // Adicionar ao head apenas se ainda n√£o existir
        if (!document.getElementById('avatar-background-fix-styles')) {
            document.head.appendChild(styleEl);
            debug("Estilos CSS corretivos adicionados");
        }
    }
    
    // 5. Observar mudan√ßas no DOM para aplicar a corre√ß√£o a novos elementos
    function observeDOMChanges() {
        debug("Configurando observador para novas altera√ß√µes...");
        
        const observer = new MutationObserver(function(mutations) {
            let shouldFix = false;
            
            mutations.forEach(function(mutation) {
                if (mutation.addedNodes.length > 0) {
                    // Verificar se algum novo elemento relevante foi adicionado
                    const hasRelevantNodes = Array.from(mutation.addedNodes).some(node => 
                        node.nodeType === 1 && (
                            node.classList?.contains('post-card') || 
                            node.classList?.contains('comment-item') ||
                            node.querySelector?.('.post-avatar, .comment-avatar')
                        )
                    );
                    
                    if (hasRelevantNodes) {
                        shouldFix = true;
                    }
                }
            });
            
            if (shouldFix) {
                debug("Novos elementos detectados, reaplicando corre√ß√£o...");
                setTimeout(fixAvatarImages, 50);
            }
        });
        
        // Observar a coluna de feed
        const feedColumn = document.querySelector('.feed-column');
        if (feedColumn) {
            observer.observe(feedColumn, { 
                childList: true, 
                subtree: true 
            });
            debug("Observando mudan√ßas no feed");
        }
    }
    
    // Iniciar o processo de corre√ß√£o
    function init() {
        // Verificar caminhos de avatar
        checkAvatarPaths();
        
        // Corrigir estilos CSS
        fixCSSStyles();
        
        // Aplicar corre√ß√£o aos avatares existentes
        fixAvatarImages();
        
        // Observar mudan√ßas no DOM
        observeDOMChanges();
        
        // Aplicar novamente ap√≥s um tempo para garantir
        setTimeout(fixAvatarImages, 1000);
        setTimeout(fixAvatarImages, 3000);
        
        debug("Corre√ß√£o para background azul inicializada com sucesso");
    }
    
    // Executar inicializa√ß√£o
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
    
    // Reexecutar quando a p√°gina estiver totalmente carregada
    window.addEventListener('load', fixAvatarImages);
    
    // Monitorar altera√ß√µes no localStorage
    window.addEventListener('storage', function(e) {
        if (e.key === CONFIG.STORAGE_KEY_PROFILE) {
            debug("Perfil alterado, reaplicando corre√ß√£o...");
            fixAvatarImages();
        }
    });
// Removed invalid expression

 document.addEventListener('DOMContentLoaded', function() {
    console.log('üñºÔ∏è Iniciando corre√ß√£o de avatares FURIAX (Anti-sobreposi√ß√£o)...');
    
    // Constantes do sistema
    const CONFIG = {
        STORAGE_KEY_PROFILE: 'furiaxProfile',
        DEFAULT_AVATAR: '../img/logo/logoFuriax.png',
        DEBUG: true  // Ativar logs para depura√ß√£o
    };
    
    // Fun√ß√£o para depura√ß√£o
    function debug(message, data = null) {
        if (CONFIG.DEBUG) {
            if (data) {
                console.log(`üîç [Avatar Fix] ${message}`, data);
            } else {
                console.log(`üîç [Avatar Fix] ${message}`);
            }
        }
    }
    
    // Fun√ß√£o para obter perfil do localStorage
    function getProfileFromStorage() {
        try {
            const profileData = localStorage.getItem(CONFIG.STORAGE_KEY_PROFILE);
            if (profileData) {
                const profile = JSON.parse(profileData);
                debug("Perfil obtido do localStorage:", profile);
                return profile;
            }
        } catch (error) {
            console.error('‚ùå Erro ao carregar perfil:', error);
        }
        
        return { 
            username: 'FuriaX_User',
            avatar: CONFIG.DEFAULT_AVATAR,
            title: 'Furioso Novato'
        };
    }
    
    // Fun√ß√£o para limpar elementos antes de atualizar
    function clearContainerBeforeUpdate(container) {
        // Remover qualquer imagem existente
        const existingImages = container.querySelectorAll('img');
        existingImages.forEach(img => img.remove());
        
        // Remover qualquer texto (iniciais) que possa existir
        container.textContent = '';
    }
    
    // Fun√ß√£o para atualizar avatar em um container
    function updateAvatarInContainer(container, avatarUrl) {
        if (!container) return false;
        
        // Limpar container primeiro
        clearContainerBeforeUpdate(container);
        
        // Checar se a URL √© v√°lida
        if (!avatarUrl || avatarUrl === 'undefined' || avatarUrl === 'null') {
            avatarUrl = CONFIG.DEFAULT_AVATAR;
        }
        
        // Criar elemento de imagem
        const img = document.createElement('img');
        img.src = avatarUrl;
        img.alt = 'Avatar';
        img.className = 'avatar-image';
        img.dataset.fixed = 'true';
        
        // Adicionar fallback para erro
        img.onerror = function() {
            this.src = CONFIG.DEFAULT_AVATAR;
        };
        
        // Adicionar ao container
        container.appendChild(img);
        
        return true;
    }
    
    // Corrigir a fun√ß√£o de cria√ß√£o de posts para usar o avatar correto
    function patchPostManager() {
        // Verificar se o PostManager est√° dispon√≠vel
        if (!window.FURIAXCommunity || !window.FURIAXCommunity.PostManager) {
            debug("PostManager n√£o encontrado, tentando novamente em 500ms...");
            setTimeout(patchPostManager, 500);
            return;
        }
        
        debug("Aplicando patch ao PostManager...");
        
        // Guardar refer√™ncia √† fun√ß√£o original
        const originalCreatePost = window.FURIAXCommunity.PostManager.createPost;
        
        // Sobrescrever a fun√ß√£o
        window.FURIAXCommunity.PostManager.createPost = function(content) {
            if (!content || content.trim() === '') return null;
            
            // Obter perfil ATUALIZADO do localStorage
            const profileData = getProfileFromStorage();
            debug("Criando post com avatar:", profileData.avatar);
            
            // Criar objeto do post com avatar correto
            const post = {
                id: Date.now(),
                usuario: profileData.username || 'FuriaX_User',
                avatar: profileData.avatar,  // Usar avatar do perfil
                timestamp: Date.now(),
                tempo: 'agora',
                conteudo: content.trim(),
                curtidas: 0,
                comentarios: [],
                compartilhamentos: 0,
                curtido: false,
                sentiment: window.FURIAXCommunity.SentimentAnalyzer.analyze(content.trim())
            };
            
            // Adicionar ao armazenamento
            const posts = this.getPosts();
            posts.unshift(post);
            this.savePosts(posts);
            
            // Sistema de gamifica√ß√£o (simplificado)
            this.addPoints('post_created', 10);
            
            // Adicionar post ao DOM sem recarregar a p√°gina
            addPostToDom(post);
            
            return post;
        };
        
        // Sobrescrever tamb√©m a fun√ß√£o de adicionar coment√°rio
        const originalAddComment = window.FURIAXCommunity.PostManager.addComment;
        
        window.FURIAXCommunity.PostManager.addComment = function(postId, commentText) {
            if (!commentText || commentText.trim() === '') return null;
            
            // Obter perfil ATUALIZADO do localStorage
            const profileData = getProfileFromStorage();
            debug("Adicionando coment√°rio com avatar:", profileData.avatar);
            
            // Usar a fun√ß√£o original para garantir compatibilidade
            const posts = this.getPosts();
            let updatedPost = null;
            
            const numericPostId = parseInt(postId);
            
            const updatedPosts = posts.map(post => {
                if (post.id === numericPostId) {
                    const comment = {
                        id: Date.now(),
                        usuario: profileData.username || 'FuriaX_User',
                        avatar: profileData.avatar,  // Usar avatar do perfil
                        texto: commentText.trim(),
                        timestamp: Date.now(),
                        tempo: 'agora',
                        sentiment: window.FURIAXCommunity.SentimentAnalyzer.analyze(commentText.trim())
                    };
                    
                    // Garantir que comentarios seja um array
                    if (!Array.isArray(post.comentarios)) {
                        post.comentarios = [];
                    }
                    
                    post.comentarios.push(comment);
                    updatedPost = post;
                    
                    // Sistema de gamifica√ß√£o
                    this.addPoints('comment_added', 5);
                }
                return post;
            });
            
            if (updatedPost) {
                this.savePosts(updatedPosts);
                
                // Adicionar coment√°rio ao DOM
                addCommentToDom(postId, updatedPost.comentarios[updatedPost.comentarios.length - 1]);
            }
            
            return updatedPost;
        };
        
        debug("‚úÖ PostManager corrigido com sucesso!");
    }
    
    // Fun√ß√£o para adicionar post diretamente ao DOM
    function addPostToDom(post) {
        if (!post) return;
        
        debug("Adicionando post ao DOM:", post);
        
        // Obter container do feed
        const feedContainer = document.querySelector('.feed-column');
        if (!feedContainer) {
            debug("Container do feed n√£o encontrado!");
            return;
        }
        
        // Criar elemento do post
        const postCard = document.createElement('div');
        postCard.className = 'post-card generated';
        postCard.dataset.id = post.id;
        
        // Criar container de avatar vazio primeiro
        const avatarContainer = document.createElement('div');
        avatarContainer.className = 'post-avatar';
        
        // Atualizar avatar no container
        updateAvatarInContainer(avatarContainer, post.avatar);
        
        // Gerar HTML do post
        postCard.innerHTML = `
            <div class="post-header">
                <!-- Avatar ser√° inserido aqui -->
                <div class="post-user-info">
                    <div class="post-user-name">${post.usuario}</div>
                    <div class="post-time">agora</div>
                </div>
            </div>
            <div class="post-content">${post.conteudo}</div>
            <div class="post-footer">
                <div class="post-stats">
                    <div class="post-stat"><i class="fas fa-heart"></i> ${post.curtidas || 0}</div>
                    <div class="post-stat"><i class="fas fa-comment"></i> ${post.comentarios.length}</div>
                    <div class="post-stat"><i class="fas fa-share"></i> ${post.compartilhamentos || 0}</div>
                </div>
           
            </div>
            <div class="comments-section" id="comments-${post.id}">
                <div class="comment-form">
                    <input type="text" class="comment-input" placeholder="Escreva um coment√°rio...">
                    <button class="comment-submit" data-id="${post.id}">Enviar</button>
                </div>
                <div class="comment-list"></div>
            </div>
        `;
        
        // Adicionar avatar ao post header
        const postHeader = postCard.querySelector('.post-header');
        postHeader.insertBefore(avatarContainer, postHeader.firstChild);
        
        // Adicionar ao topo do feed
        const firstPost = feedContainer.querySelector('.post-card');
        if (firstPost) {
            feedContainer.insertBefore(postCard, firstPost);
        } else {
            feedContainer.appendChild(postCard);
        }
        
        // Limpar campo de texto
        const postInput = document.querySelector('.post-input');
        if (postInput) {
            postInput.value = '';
        }
        
        // Feedback visual
        postCard.style.animation = 'fadeIn 0.5s ease-out';
        postCard.style.borderLeft = '3px solid #1e90ff';
        
        debug("‚úÖ Post adicionado ao DOM");
    }
    
    // Fun√ß√£o para adicionar coment√°rio diretamente ao DOM
    function addCommentToDom(postId, comment) {
        if (!postId || !comment) return;
        
        debug("Adicionando coment√°rio ao DOM:", comment);
        
        // Encontrar a se√ß√£o de coment√°rios
        const commentsSection = document.querySelector(`#comments-${postId}`);
        if (!commentsSection) {
            debug("Se√ß√£o de coment√°rios n√£o encontrada");
            return;
        }
        
        // Lista de coment√°rios
        const commentList = commentsSection.querySelector('.comment-list');
        if (!commentList) {
            debug("Lista de coment√°rios n√£o encontrada");
            return;
        }
        
        // Criar elemento de coment√°rio
        const commentItem = document.createElement('div');
        commentItem.className = 'comment-item';
        
        // Criar container de avatar
        const avatarContainer = document.createElement('div');
        avatarContainer.className = 'comment-avatar';
        
        // Atualizar avatar no container
        updateAvatarInContainer(avatarContainer, comment.avatar);
        
        // Criar conte√∫do do coment√°rio
        const commentContent = document.createElement('div');
        commentContent.className = 'comment-content';
        commentContent.innerHTML = `
            <div class="comment-user">${comment.usuario}</div>
            <div class="comment-text">${comment.texto}</div>
            <div class="comment-time">agora</div>
        `;
        
        // Montar o coment√°rio
        commentItem.appendChild(avatarContainer);
        commentItem.appendChild(commentContent);
        
        // Adicionar √† lista
        commentList.appendChild(commentItem);
        
        // Mostrar a se√ß√£o de coment√°rios
        commentsSection.classList.add('show');
        
        // Limpar campo
        const commentInput = commentsSection.querySelector('.comment-input');
        if (commentInput) {
            commentInput.value = '';
        }
        
        debug("‚úÖ Coment√°rio adicionado ao DOM");
    }
    
    // Corrigir o bot√£o de publica√ß√£o para n√£o recarregar a p√°gina
    function fixPublishButton() {
        // Obter o bot√£o de publicar
        const publishBtn = document.querySelector('#analyzePostBtn');
        if (!publishBtn) {
            debug("Bot√£o de publica√ß√£o n√£o encontrado, tentando novamente em 500ms...");
            setTimeout(fixPublishButton, 500);
            return;
        }
        
        debug("Corrigindo bot√£o de publica√ß√£o...");
        
        // Clonar o bot√£o para remover todos os event listeners
        const newPublishBtn = publishBtn.cloneNode(true);
        publishBtn.parentNode.replaceChild(newPublishBtn, publishBtn);
        
        // Adicionar novo event listener personalizado
        newPublishBtn.addEventListener('click', function(e) {
            e.preventDefault(); // Impedir comportamento padr√£o
            
            // Obter o conte√∫do do post
            const postInput = document.querySelector('.post-input');
            if (!postInput || !postInput.value.trim()) {
                debug("Campo de texto vazio");
                return;
            }
            
            debug("Bot√£o de publica√ß√£o clicado");
            
            // Mostrar anima√ß√£o de feedback sem recarregar
            const overlay = document.getElementById('refreshOverlay');
            if (overlay) {
                overlay.classList.add('active');
                setTimeout(() => {
                    overlay.classList.remove('active');
                }, 1000);
            }
            
            // Usar o PostManager para criar o post
            if (window.FURIAXCommunity && window.FURIAXCommunity.PostManager) {
                const post = window.FURIAXCommunity.PostManager.createPost(postInput.value.trim());
                debug("Post criado:", post);
                
                // Mostrar feedback de sucesso
                if (window.FURIAXCommunity.NotificationManager) {
                    window.FURIAXCommunity.NotificationManager.show('Post publicado com sucesso!', 'success');
                }
            } else {
                debug("PostManager n√£o dispon√≠vel");
            }
        });
        
        debug("‚úÖ Bot√£o de publica√ß√£o corrigido");
    }
    
    // Fun√ß√£o para for√ßar a atualiza√ß√£o de todos os avatares existentes
    function updateAllAvatars() {
        debug("Atualizando todos os avatares existentes...");
        
        // Obter perfil atual
        const profile = getProfileFromStorage();
        if (!profile || !profile.avatar) {
            debug("Perfil ou avatar n√£o encontrado");
            return;
        }
        
        // Atualizar posts
        document.querySelectorAll('.post-card').forEach(post => {
            const usernameElement = post.querySelector('.post-user-name');
            if (usernameElement && usernameElement.textContent === profile.username) {
                const avatarContainer = post.querySelector('.post-avatar');
                if (avatarContainer) {
                    updateAvatarInContainer(avatarContainer, profile.avatar);
                    debug("Avatar atualizado em post");
                }
            }
        });
        
        // Atualizar coment√°rios
        document.querySelectorAll('.comment-item').forEach(comment => {
            const usernameElement = comment.querySelector('.comment-user');
            if (usernameElement && usernameElement.textContent === profile.username) {
                const avatarContainer = comment.querySelector('.comment-avatar');
                if (avatarContainer) {
                    updateAvatarInContainer(avatarContainer, profile.avatar);
                    debug("Avatar atualizado em coment√°rio");
                }
            }
        });
        
        debug("‚úÖ Todos os avatares atualizados");
    }
    
    // Observar mudan√ßas de perfil
    function observeProfileChanges() {
        // Monitorar altera√ß√µes no localStorage
        window.addEventListener('storage', function(e) {
            if (e.key === CONFIG.STORAGE_KEY_PROFILE) {
                debug("Altera√ß√£o detectada no perfil");
                updateAllAvatars();
            }
        });
        
        // Verificar periodicamente se o avatar mudou
        let lastKnownAvatar = null;
        
        setInterval(function() {
            const profile = getProfileFromStorage();
            
            if (profile && profile.avatar !== lastKnownAvatar) {
                debug("Avatar mudou de:", lastKnownAvatar, "para:", profile.avatar);
                lastKnownAvatar = profile.avatar;
                updateAllAvatars();
            }
        }, 2000); // Verificar a cada 2 segundos
    }
    
    // Aplicar estilos espec√≠ficos para avatares
    function addAvatarStyles() {
        const styleElement = document.createElement('style');
        styleElement.id = 'avatar-fix-styles';
        styleElement.textContent = `
            .post-avatar, .comment-avatar {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                overflow: hidden;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: rgba(0, 0, 0, 0.1);
            }
            
            .post-avatar img, .comment-avatar img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                display: block;
            }
            
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            
            .post-card.generated {
                animation: fadeIn 0.5s ease-out;
            }
        `;
        document.head.appendChild(styleElement);
        
        debug("‚úÖ Estilos espec√≠ficos para avatares adicionados");
    }
    
    // Iniciar todas as fun√ß√µes
    function init() {
        debug("üöÄ Iniciando corre√ß√£o de avatares...");
        
        // Adicionar estilos
        addAvatarStyles();
        
        // Aplicar patches
        patchPostManager();
        fixPublishButton();
        
        // Atualizar avatares existentes
        setTimeout(updateAllAvatars, 1000);
        
        // Monitorar mudan√ßas
        observeProfileChanges();
        
        debug("‚úÖ Sistema de corre√ß√£o de avatares inicializado");
    }
    
    // Inicializar o sistema
    init();
});
    /**
 * FURIAX - Corre√ß√£o Simplificada para Avatares em Posts
 * Esta vers√£o usa uma abordagem minimalista para resolver o problema
 */

// Modifica√ß√£o do sistema de avatares
(function() {
    // Aguardar que o sistema original seja carregado
    document.addEventListener('DOMContentLoaded', function() {
        // Verificar se o sistema FURIAX est√° dispon√≠vel
        if (!window.FURIAX || !window.FURIAX.avatars) {
            console.error("Sistema FURIAX n√£o encontrado. A corre√ß√£o n√£o pode ser aplicada.");
            return;
        }
        
        // Armazenar refer√™ncia para a fun√ß√£o original updateAvatars
        const originalUpdateAvatars = window.FURIAX.avatars.update;
        
        // Substituir a fun√ß√£o update com uma vers√£o melhorada
        window.FURIAX.avatars.update = function(avatarId) {
            // Chamar a fun√ß√£o original
            originalUpdateAvatars(avatarId);
            
            // Registrar o hook para chamadas futuras
            registerPostHook();
            
            console.log("Corre√ß√£o de avatar: Sistema melhorado aplicado com sucesso");
        };
        
        // Fun√ß√£o para registrar hooks em eventos de post
        function registerPostHook() {
            // Buscar todos os bot√µes de envio de post ou coment√°rio
            const postButtons = document.querySelectorAll('button[type="submit"], #post-button, .send-comment, #analyzePostBtn, .post-btn');
            
            // Para cada bot√£o, adicionar um listener de clique
            postButtons.forEach(button => {
                // Verificar se o bot√£o j√° tem nosso listener especial
                if (!button.hasAttribute('data-avatar-hook')) {
                    button.setAttribute('data-avatar-hook', 'true');
                    
                    // Adicionar evento de clique
                    button.addEventListener('click', function() {
                        // Esperar um pouco para o DOM ser atualizado ap√≥s o post
                        setTimeout(function() {
                            // Obter o avatar atual do localStorage
                            try {
                                const profileData = localStorage.getItem('furiaxProfile');
                                if (profileData) {
                                    const profile = JSON.parse(profileData);
                                    if (profile && profile.avatar) {
                                        // Atualizar todos os avatares na p√°gina
                                        originalUpdateAvatars(profile.avatar);
                                    }
                                }
                            } catch (error) {
                                console.error("Erro ao processar perfil:", error);
                            }
                        }, 300); // 300ms geralmente √© suficiente para o DOM atualizar
                    });
                }
            });
        }
        
        // Adicionar uma fun√ß√£o de atualiza√ß√£o global que pode ser chamada ap√≥s AJAX
        window.FURIAX.updateAvatarsAfterPost = function() {
            // Apenas recuperar o avatar atual e aplic√°-lo
            try {
                const profileData = localStorage.getItem('furiaxProfile');
                if (profileData) {
                    const profile = JSON.parse(profileData);
                    if (profile && profile.avatar) {
                        // Atualizar todos os avatares na p√°gina
                        originalUpdateAvatars(profile.avatar);
                    }
                }
            } catch (error) {
                console.error("Erro ao processar perfil:", error);
            }
        };
        
        // Registrar hooks para bot√µes na inicializa√ß√£o
        registerPostHook();
        
        // Fazer uma atualiza√ß√£o inicial para garantir
        setTimeout(function() {
            // Tentar uma atualiza√ß√£o inicial para garantir que tudo esteja correto
            window.FURIAX.updateAvatarsAfterPost();
        }, 500);
    });
})();

document.addEventListener('DOMContentLoaded', function() {
    console.log('üñºÔ∏è Inicializando corre√ß√£o de avatares FURIAX v1.1.0...');
    
    // Definir a prioridade deste script como alta
    // Isso ajuda a garantir que nossas corre√ß√µes n√£o sejam sobrepostas por outros scripts
    document.currentScript.setAttribute('data-priority', 'high');
    
    // Fun√ß√£o para obter dados de perfil do localStorage de forma confi√°vel
    function getUserProfile() {
        // Tentar obter do sistema multi-perfil primeiro (se dispon√≠vel)
        if (window.FURIAXCommunity && window.FURIAXCommunity.MultiProfileManager) {
            const profileData = window.FURIAXCommunity.MultiProfileManager.getActiveProfileData();
            if (profileData) return profileData;
        }
        
        // Tentar obter do ProfileManager
        if (window.FURIAXCommunity && window.FURIAXCommunity.ProfileManager) {
            const profileData = window.FURIAXCommunity.ProfileManager.getProfileData();
            if (profileData) return profileData;
        }
        
        // Tentar obter diretamente do localStorage
        try {
            const profileString = localStorage.getItem('furiaxProfile');
            if (profileString) {
                return JSON.parse(profileString);
            }
        } catch (e) {
            console.error('Erro ao carregar perfil do localStorage:', e);
        }
        
        // Dados padr√£o se nada for encontrado
        return {
            username: 'FuriaX_User',
            avatar: '../img/logo/logoFuriax.png',
            title: 'Furioso Novato'
        };
    }
    
    // Fun√ß√£o para sincronizar usu√°rio atual com o elemento sidebar
    function syncSidebarProfile() {
        const profile = getUserProfile();
        
        // Atualizar nome de usu√°rio na sidebar
        const usernameElement = document.getElementById('sidebarUsername');
        if (usernameElement) {
            usernameElement.textContent = profile.username;
        }
        
        // Atualizar t√≠tulo/role na sidebar
        const titleElement = document.getElementById('sidebarTitle');
        if (titleElement) {
            titleElement.textContent = profile.title;
        }
        
        // Atualizar avatar na sidebar
     
        
        console.log('‚úÖ Perfil na sidebar atualizado');
    }
    
    // Fun√ß√£o para gerar HTML de avatar com fallback mais confi√°vel
    function getAvatarHTML(avatarUrl) {
        // Verificar se a URL √© v√°lida e n√£o est√° vazia
        if (!avatarUrl || avatarUrl === 'undefined' || avatarUrl === 'null') {
            avatarUrl = '../img/logo/logoFuriax.png';
        }
        
        // Verificar se √© uma URL completa ou relativa
        if (avatarUrl.indexOf('http') !== 0 && avatarUrl.indexOf('../') !== 0 && avatarUrl.indexOf('/') !== 0) {
            // Se n√£o for uma URL bem formada, usar a imagem padr√£o
            avatarUrl = '../img/logo/logoFuriax.png';
        }
        
        // Usar atributo data-original-src para preservar a URL original
        // e poder verificar se foi alterada por algum outro script
       
    }
    
    // Fun√ß√£o para verificar e restaurar avatares se foram substitu√≠dos
    function checkAndRestoreAvatars() {
        const profile = getUserProfile();
        
        // Verificar todas as imagens de avatar que foram marcadas pelo nosso script
        document.querySelectorAll('img.avatar-image[data-fixed="true"]').forEach(img => {
            const originalSrc = img.getAttribute('data-original-src');
            
            // Se a src atual n√£o √© a original e n√£o √© a fallback, restaurar
            if (img.src !== originalSrc && !img.hasAttribute('data-fallback-applied')) {
                img.src = originalSrc;
                console.log('üîÑ Avatar restaurado ao valor original');
            }
        });
    }
    
    // Fun√ß√£o principal para aplicar avatares nos posts
    function applyAvatarsToAllPosts() {
        const profile = getUserProfile();
        console.log('üîç Aplicando avatar a todos os posts do usu√°rio:', profile.username);
        
        // Verificar todos os posts
        const allPosts = document.querySelectorAll('.post-card');
        
        allPosts.forEach(post => {
            const usernameElement = post.querySelector('.post-user-name');
            
            // Verificar se √© um post do usu√°rio atual
            if (usernameElement && profile.username === usernameElement.textContent.trim()) {
                const avatarContainer = post.querySelector('.post-avatar');
                
                if (avatarContainer) {
                    // Verificar se j√° existe uma imagem que foi configurada por n√≥s
                    const existingImg = avatarContainer.querySelector('img[data-fixed="true"]');
                    
                    if (existingImg) {
                        // Se a imagem j√° existe e foi configurada por n√≥s, verificar se a fonte est√° correta
                        const originalSrc = existingImg.getAttribute('data-original-src');
                        if (originalSrc !== profile.avatar) {
                            // Se o avatar mudou, atualizar
                            avatarContainer.innerHTML = getAvatarHTML(profile.avatar);
                        }
                    } else {
                        // Se n√£o existe ou n√£o foi configurada por n√≥s, substituir
                        avatarContainer.innerHTML = getAvatarHTML(profile.avatar);
                    }
                    
                    console.log('‚úì Avatar aplicado ao post de:', profile.username);
                }
            }
        });
        
        // Aplicar tamb√©m aos coment√°rios
        const allComments = document.querySelectorAll('.comment-item');
        
        allComments.forEach(comment => {
            const commentUsername = comment.querySelector('.comment-user');
            
            if (commentUsername && profile.username === commentUsername.textContent.trim()) {
                const commentAvatar = comment.querySelector('.comment-avatar');
                
                if (commentAvatar) {
                    // Mesma l√≥gica de verifica√ß√£o aplicada aos coment√°rios
                    const existingImg = commentAvatar.querySelector('img[data-fixed="true"]');
                    
                    if (existingImg) {
                        const originalSrc = existingImg.getAttribute('data-original-src');
                        if (originalSrc !== profile.avatar) {
                            commentAvatar.innerHTML = getAvatarHTML(profile.avatar);
                        }
                    } else {
                        commentAvatar.innerHTML = getAvatarHTML(profile.avatar);
                    }
                    
                    console.log('‚úì Avatar aplicado ao coment√°rio de:', profile.username);
                }
            }
        });
        
        // Agendar verifica√ß√µes para prevenir substitui√ß√µes por outros scripts
        setTimeout(checkAndRestoreAvatars, 1000);  // 1 segundo depois
        setTimeout(checkAndRestoreAvatars, 2000);  // 2 segundos depois
    }
    
    // Modificar PostManager para garantir que novos posts usem o avatar correto
    function fixPostManagerAvatar() {
        // Verificar se o PostManager est√° dispon√≠vel
        if (!window.FURIAXCommunity || !window.FURIAXCommunity.PostManager) {
            console.warn('‚ö†Ô∏è PostManager n√£o encontrado, verificando novamente em breve...');
            setTimeout(fixPostManagerAvatar, 1000);
            return;
        }
        
        // Verificar se j√° foi corrigido
        if (window.FURIAXCommunity.PostManager._avatarFixed) {
            return;
        }
        
        // Armazenar a fun√ß√£o original
        const originalCreatePost = window.FURIAXCommunity.PostManager.createPost;
        
        // Sobrescrever com vers√£o corrigida
        window.FURIAXCommunity.PostManager.createPost = function(content) {
            // Obter perfil atualizado
            const profile = getUserProfile();
            
            // Verificar se o avatar √© v√°lido
            let avatarUrl = profile.avatar;
            if (!avatarUrl || avatarUrl === 'undefined' || avatarUrl === 'null') {
                avatarUrl = '../img/logo/logoFuriax.png';
            }
            
            // Modificar StorageManager temporariamente para garantir que o avatar persista
            if (window.StorageManager && window.StorageManager.set) {
                const originalStorageSet = window.StorageManager.set;
                window.StorageManager.set = function(key, value) {
                    // Se estiver salvando posts, garantir que tenham o avatar correto
                    if (key.includes('posts') && Array.isArray(value)) {
                        value = value.map(post => {
                            if (post.usuario === profile.username) {
                                post.avatar = avatarUrl;
                            }
                            return post;
                        });
                    }
                    return originalStorageSet.call(this, key, value);
                };
                
                // Restaurar a fun√ß√£o original ap√≥s um breve per√≠odo
                setTimeout(() => {
                    window.StorageManager.set = originalStorageSet;
                }, 500);
            }
            
            // Criar post usando a fun√ß√£o original
            const post = originalCreatePost.call(this, content);
            
            if (post) {
                // Garantir que o avatar e username estejam corretos
                post.avatar = avatarUrl;
                post.usuario = profile.username;
                
                // Verifica√ß√£o dupla para garantir que o post use o avatar correto
                try {
                    // Atualizar o post no storage
                    const posts = this.getPosts();
                    const updatedPosts = posts.map(p => {
                        if (p.id === post.id) {
                            p.avatar = avatarUrl;
                            p.usuario = profile.username;
                        }
                        return p;
                    });
                    
                    // Salvar posts atualizados
                    this.savePosts(updatedPosts);
                    
                    console.log('‚úÖ Novo post criado com avatar correto:', avatarUrl);
                } catch (e) {
                    console.error('‚ùå Erro ao atualizar post no storage:', e);
                }
                
                // Agendar uma verifica√ß√£o adicional para garantir que o avatar seja aplicado na interface
                setTimeout(() => {
                    applyAvatarsToAllPosts();
                }, 100);
            }
            
            return post;
        };
        
        // Marcar como corrigido
        window.FURIAXCommunity.PostManager._avatarFixed = true;
        console.log('‚úÖ PostManager corrigido para usar avatar atual');
    }
    
    // Corrigir tamb√©m a fun√ß√£o addComment
    function fixCommentManagerAvatar() {
        // Verificar se o PostManager est√° dispon√≠vel
        if (!window.FURIAXCommunity || !window.FURIAXCommunity.PostManager) {
            console.warn('‚ö†Ô∏è PostManager n√£o encontrado para corre√ß√£o de coment√°rios');
            setTimeout(fixCommentManagerAvatar, 1000);
            return;
        }
        
        // Verificar se j√° foi corrigido
        if (window.FURIAXCommunity.PostManager._commentAvatarFixed) {
            return;
        }
        
        // Armazenar a fun√ß√£o original
        const originalAddComment = window.FURIAXCommunity.PostManager.addComment;
        
        // Sobrescrever com vers√£o corrigida
        window.FURIAXCommunity.PostManager.addComment = function(postId, commentText) {
            // Obter perfil atualizado
            const profile = getUserProfile();
            
            // Criar coment√°rio usando a fun√ß√£o original
            const updatedPost = originalAddComment.call(this, postId, commentText);
            
            if (updatedPost && updatedPost.comentarios && updatedPost.comentarios.length > 0) {
                // Garantir que o √∫ltimo coment√°rio tenha o avatar correto
                const lastComment = updatedPost.comentarios[updatedPost.comentarios.length - 1];
                lastComment.avatar = profile.avatar;
                lastComment.usuario = profile.username;
                
                // Atualizar o post no storage
                const posts = this.getPosts();
                const updatedPosts = posts.map(p => p.id === updatedPost.id ? updatedPost : p);
                this.savePosts(updatedPosts);
                
                console.log('‚úÖ Novo coment√°rio criado com avatar correto');
            }
            
            return updatedPost;
        };
        
        // Marcar como corrigido
        window.FURIAXCommunity.PostManager._commentAvatarFixed = true;
        console.log('‚úÖ Fun√ß√£o de coment√°rios corrigida para usar avatar atual');
    }
    
    // Configurar observador do DOM para atualizar novos posts/coment√°rios
    function setupDOMObserver() {
        const observer = new MutationObserver(function(mutations) {
            let shouldUpdate = false;
            
            for (const mutation of mutations) {
                if (mutation.addedNodes.length) {
                    // Verificar se algum dos n√≥s adicionados √© um post ou coment√°rio
                    for (let i = 0; i < mutation.addedNodes.length; i++) {
                        const node = mutation.addedNodes[i];
                        if (node.classList && 
                            (node.classList.contains('post-card') || 
                             node.classList.contains('comment-item'))) {
                            shouldUpdate = true;
                            break;
                        }
                    }
                    
                    if (shouldUpdate) break;
                }
            }
            
            if (shouldUpdate) {
                console.log('üîÑ Novos elementos detectados, atualizando avatares...');
                setTimeout(applyAvatarsToAllPosts, 50);
            }
        });
        
        // Observar toda a coluna de feed
        const feedColumn = document.querySelector('.feed-column');
        if (feedColumn) {
            observer.observe(feedColumn, { childList: true, subtree: true });
            console.log('üëÄ Observador do DOM configurado para a coluna de feed');
        }
    }
    
    // Desativar qualquer script conflitante
    function disableConflictingScripts() {
        // Procurar por scripts que podem estar substituindo nossas altera√ß√µes
        const potentialConflicts = [
            'furiax-fixphotos.js',  // Mencionado no community.html
            'reload.js',            // Pode estar recarregando a p√°gina ou elementos
            'furiax-profile-sync.js' // Pode estar tentando sincronizar perfis tamb√©m
        ];
        
        // Verificar se algum deles est√° presente e tentar desativar suas fun√ß√µes
        // Essa √© uma abordagem n√£o-invasiva, apenas previne que eles substituam nossos avatares
        
        // 1. Verificar se h√° intervalos ou timeouts
        if (window._avatarIntervals) {
            window._avatarIntervals.forEach(id => clearInterval(id));
        }
        
        // 2. Monitorar as altera√ß√µes em avatares para detectar conflitos
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // Verificar se houve altera√ß√£o em um avatar que configuramos
                if (mutation.type === 'attributes' && 
                    mutation.attributeName === 'src' && 
                    mutation.target.hasAttribute('data-fixed') &&
                    !mutation.target.hasAttribute('data-mutation-handled')) {
                    
                    // Marcar para evitar loops infinitos
                    mutation.target.setAttribute('data-mutation-handled', 'true');
                    
                    // Restaurar para o valor original
                    const originalSrc = mutation.target.getAttribute('data-original-src');
                    if (mutation.target.src !== originalSrc && originalSrc) {
                        console.log('üõ°Ô∏è Interceptada altera√ß√£o do avatar por outro script, restaurando...');
                        mutation.target.src = originalSrc;
                    }
                    
                    // Remover a marca√ß√£o ap√≥s um momento
                    setTimeout(() => {
                        mutation.target.removeAttribute('data-mutation-handled');
                    }, 50);
                }
            });
        });
        
        // Observar altera√ß√µes de atributos em todos os avatares
        setTimeout(() => {
            document.querySelectorAll('img.avatar-image').forEach(img => {
                observer.observe(img, { attributes: true });
            });
        }, 1000);
    }
    
    // Inicializa√ß√£o completa
    function initialize() {
        // Sincronizar perfil da sidebar
        syncSidebarProfile();
        
        // Aplicar avatares aos posts existentes
        applyAvatarsToAllPosts();
        
        // Corrigir o PostManager para posts futuros
        fixPostManagerAvatar();
        
        // Corrigir gerenciador de coment√°rios
        fixCommentManagerAvatar();
        
        // Configurar observador para mudan√ßas no DOM
        setupDOMObserver();
        
        // Desativar scripts conflitantes
        disableConflictingScripts();
        
        // Fazer novas verifica√ß√µes para garantir que os avatares permane√ßam corretos
        setTimeout(applyAvatarsToAllPosts, 1500);
        setTimeout(applyAvatarsToAllPosts, 3000);
        setTimeout(applyAvatarsToAllPosts, 5000);
        
        // Configurar verifica√ß√£o peri√≥dica para garantir que avatares continuem corretos
        setInterval(checkAndRestoreAvatars, 2000);
        
        console.log('‚úÖ Corre√ß√£o de avatares inicializada com sucesso!');
    }
    
    // Iniciar depois de um pequeno atraso para garantir que o DOM esteja pronto
    setTimeout(initialize, 500);
    
    // Adicionar ouvinte para mudan√ßas no localStorage (altera√ß√µes de perfil)
    window.addEventListener('storage', function(e) {
        if (e.key === 'furiaxProfile' || e.key === CONFIG.STORAGE_KEYS.PROFILE || 
            e.key.includes('furiax_')) {
            console.log('üîÑ Mudan√ßa detectada no perfil, atualizando avatares...');
            syncSidebarProfile();
            applyAvatarsToAllPosts();
        }
    });
});
 
 document.addEventListener('DOMContentLoaded', function() {
    console.log('üîß Aplicando sincroniza√ß√£o de perfil para o chat...');
    
    // Fun√ß√£o para obter dados do perfil do localStorage
    function getProfileFromLocalStorage() {
        try {
            // Primeiro tenta obter do sistema multi-perfil se dispon√≠vel
            if (window.FURIAXCommunity && window.FURIAXCommunity.MultiProfileManager) {
                return window.FURIAXCommunity.MultiProfileManager.getActiveProfileData();
            }
            
            // Se n√£o, tenta obter diretamente do localStorage
            const profileKey = 'furiaxProfile';
            const profileData = localStorage.getItem(profileKey);
            if (profileData) {
                return JSON.parse(profileData);
            }
        } catch (error) {
            console.error('Erro ao obter perfil do localStorage:', error);
        }
        
        // Valor padr√£o se nada for encontrado
        return {
            username: 'FuriaX_User',
            avatar: '../img/logo/logoFuriax.png',
            title: 'Furioso Novato'
        };
    }
    
    // Fun√ß√£o para aplicar o perfil nos chats
    function applyProfileToChats() {
        // Obter dados do perfil
        const profile = getProfileFromLocalStorage();
        console.log('üìã Perfil carregado:', profile);
        
        // Verificar se temos os dados necess√°rios
        if (!profile || !profile.username) {
            console.warn('‚ö†Ô∏è Dados de perfil incompletos');
            return;
        }
        
        // Aplicar nome de usu√°rio e avatar aos elementos relevantes
        const username = profile.username;
        const avatarUrl = profile.avatar || '../img/logo/logoFuriax.png';
        
        // Encontrar posts do usu√°rio atual e atualizar avatar
        document.querySelectorAll('.post-card').forEach(post => {
            const usernameEl = post.querySelector('.post-user-name');
            if (usernameEl && usernameEl.textContent.trim() === username) {
                const avatarContainer = post.querySelector('.post-avatar');
                if (avatarContainer) {
                    // Verificar se j√° tem uma imagem, caso contr√°rio, adicionar
                    
                }
                
                // Aplicar nome correto se necess√°rio
                if (usernameEl.textContent !== username) {
                    usernameEl.textContent = username;
                }
            }
        });
        
        // Fazer o mesmo para coment√°rios
        document.querySelectorAll('.comment-item').forEach(comment => {
            const commentUsername = comment.querySelector('.comment-user');
            if (commentUsername && commentUsername.textContent.trim() === username) {
                const commentAvatar = comment.querySelector('.comment-avatar');
                if (commentAvatar) {
                   
                }
                
                // Aplicar nome correto se necess√°rio
                if (commentUsername.textContent !== username) {
                    commentUsername.textContent = username;
                }
            }
        });
        
        // Verificar e corrigir o formul√°rio de cria√ß√£o de post para garantir que os novos posts usem o perfil correto
        if (window.FURIAXCommunity && window.FURIAXCommunity.PostManager) {
            // Hook para criar posts com o perfil correto
            const originalCreatePost = window.FURIAXCommunity.PostManager.createPost;
            
            // Sobrescrever apenas se ainda n√£o foi sobrescrito
            if (!window.FURIAXCommunity.PostManager._profileHooked) {
                window.FURIAXCommunity.PostManager.createPost = function(content) {
                    // Obter perfil atualizado antes de criar o post
                    const currentProfile = getProfileFromLocalStorage();
                    
                    // Criar post com dados atualizados
                    const post = originalCreatePost.call(this, content);
                    
                    if (post) {
                        // Garantir que o post use o perfil correto
                        post.usuario = currentProfile.username || 'FuriaX_User';
                        post.avatar = currentProfile.avatar || '../img/logo/logoFuriax.png';
                        
                        // Atualizar o post no armazenamento
                        const posts = this.getPosts();
                        const updatedPosts = posts.map(p => {
                            if (p.id === post.id) {
                                return post;
                            }
                            return p;
                        });
                        
                        // Salvar posts atualizados
                        this.savePosts(updatedPosts);
                    }
                    
                    return post;
                };
                
                // Marcar como hooked para evitar m√∫ltiplas sobrescritas
                window.FURIAXCommunity.PostManager._profileHooked = true;
            }
        }
        
        console.log('‚úÖ Perfil aplicado aos chats com sucesso');
    }
    
    // Hook para o evento de storage para atualizar os chats quando o perfil for alterado
    window.addEventListener('storage', function(e) {
        if (e.key === 'furiaxProfile' || e.key.includes('furiax_')) {
            console.log('üîÑ Detectada altera√ß√£o no perfil, atualizando chats...');
            applyProfileToChats();
        }
    });
    
    // Observar mudan√ßas no DOM para aplicar perfil em novos posts/coment√°rios
    const observer = new MutationObserver(function(mutations) {
        for (const mutation of mutations) {
            if (mutation.addedNodes.length) {
                setTimeout(applyProfileToChats, 50);
                break;
            }
        }
    });
    
    // Observar a coluna de feed
    const feedColumn = document.querySelector('.feed-column');
    if (feedColumn) {
        observer.observe(feedColumn, { childList: true, subtree: true });
    }
    
    // Aplicar inicialmente ap√≥s pequeno atraso para garantir que o DOM esteja pronto
    setTimeout(applyProfileToChats, 500);
    
    // Verificar novamente ap√≥s um tempo para pegar elementos carregados dinamicamente
    setTimeout(applyProfileToChats, 1500);
    
    console.log('‚úÖ Sistema de sincroniza√ß√£o de perfil inicializado');
});

document.addEventListener("DOMContentLoaded", function() {
    const tabs = document.querySelectorAll('.analysis-tab');
    const contents = document.querySelectorAll('.analysis-content');

    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = tab.getAttribute('data-tab');
3
            tabs.forEach(t => t.classList.remove('active'));
            contents.forEach(c => c.classList.remove('active'));

            tab.classList.add('active');
            document.getElementById(target + '-content').classList.add('active');
        });
    });

    // Ativar a aba "profile" por padr√£o
    tabs[0].click();
});
// function ativarReloadNosBotoes() {
//   const botoes = document.querySelectorAll('#analyzePostBtn');
  
//   botoes.forEach(botao => {
//     botao.addEventListener('click', () => {
//       location.reload(); // Recarrega a p√°gina
//     });
//   });
// }

// Executa a fun√ß√£o assim que o DOM estiver carregado
document.addEventListener('DOMContentLoaded', ativarReloadNosBotoes);

// Adiciona estilos e overlay no carregamento da p√°gina
document.addEventListener('DOMContentLoaded', () => {
  // Cria overlay
  const refreshOverlay = document.createElement('div');
  refreshOverlay.id = 'refreshOverlay';
  document.body.appendChild(refreshOverlay);

  // Spinner
  const spinner = document.createElement('div');
  spinner.className = 'refresh-spinner';
  refreshOverlay.appendChild(spinner);

  // Texto
  const refreshText = document.createElement('div');
  refreshText.className = 'refresh-text';
  refreshText.textContent = 'Analisando post...';
  refreshOverlay.appendChild(refreshText);

  // Estilos
  const style = document.createElement('style');
  style.textContent = `
    #refreshOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
    }

    #refreshOverlay.active {
      opacity: 1;
      visibility: visible;
    }

    .refresh-spinner {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 5px solid rgba(30, 144, 255, 0.3);
      border-top-color: #1e90ff;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }

    .refresh-text {
      color: white;
      font-family: sans-serif;
      font-size: 18px;
      font-weight: 600;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  `;
  document.head.appendChild(style);

  // Fun√ß√£o para mostrar anima√ß√£o e recarregar
  function triggerAnimatedReload() {
    refreshOverlay.classList.add('active');
    setTimeout(() => {
      location.reload();
    }, 1500); // Tempo para mostrar anima√ß√£o antes do reload
  }

  // Aplica evento a todos os bot√µes
  document.querySelectorAll('#analyzePostBtn').forEach(btn => {
    btn.addEventListener('click', triggerAnimatedReload);
  });
});



</script>


</body>
</html>